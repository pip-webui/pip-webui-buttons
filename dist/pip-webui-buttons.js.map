{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/dependencies/TranslateFilter.ts","src/fabs/FabTooltipVisibility.ts","src/index.ts","src/refresh_button/RefreshButton.ts","src/toggle_buttons/ToggleButtons.ts","temp/pip-webui-buttons-html.min.js"],"names":[],"mappings":"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","file":"pip-webui-buttons.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","{\n    function translate($injector: ng.auto.IInjectorService) {\n        const pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\n\n        return function (key: string) {\n            return pipTranslate ? pipTranslate['translate'](key) || key : key;\n        }\n    }\n\n    angular.module('pipButtons.Translate', [])\n        .filter('translate', translate);\n}","{\n\nclass FabTooltipVisibilityController {\n    private _element;\n    private _scope: angular.IScope;\n    private _timeout: ng.ITimeoutService;\n\n    constructor(\n        $element: any,\n        $attrs: angular.IAttributes,\n        $scope: angular.IScope,\n        $timeout: ng.ITimeoutService,\n        $parse\n    ) {\n        \"ngInject\";\n        let trigGetter = $parse($attrs['pipFabTooltipVisibility']),\n            showGetter = $parse($attrs['pipFabShowTooltip']),\n            showSetter = showGetter.assign;\n\n        $scope.$watch(trigGetter, (isOpen) => {\n            if (!_.isFunction(showSetter)) return;\n\n            if (isOpen) {\n                $timeout(() => {\n                    showSetter($scope, isOpen);\n                }, 600);\n            } else {\n                showSetter($scope, isOpen);\n            }\n        });\n    }\n}\n\n\nfunction pipFabTooltipVisibility($parse, $timeout): ng.IDirective {\n    return {\n        restrict: 'A',\n        scope: false,\n        controller: FabTooltipVisibilityController\n    };\n}\n\nangular\n    .module('pipFabTooltipVisibility', [])\n    .directive('pipFabTooltipVisibility', pipFabTooltipVisibility);\n\n}","ï»¿import './refresh_button/RefreshButton';\nimport './toggle_buttons/ToggleButtons'\nimport './fabs/FabTooltipVisibility';\n\nangular.module('pipButtons', [\n    'pipToggleButtons',\n    'pipRefreshButton',\n    'pipFabTooltipVisibility'\n]);","{\n\ninterface IRefreshButtonBindings {\n    [key: string]: any;\n\n    text: any;\n    visible: any;\n    onRefresh: any\n}\n\nconst RefreshButtonBindings: IRefreshButtonBindings = {\n    text: '<pipText',\n    visible: '<pipVisible',\n    onRefresh: '&?pipRefresh'\n}\n\nclass RefreshButtonChanges implements ng.IOnChangesObject, IRefreshButtonBindings {\n    [key: string]: ng.IChangesObject < any > ;\n    // Not one way bindings\n    onRefresh: ng.IChangesObject < ({\n        $event: any\n    }) => ng.IPromise < any >> ;\n    // One way bindings\n    text: ng.IChangesObject < string > ;\n    visible: ng.IChangesObject < boolean > ;\n}\n\nclass RefreshButtonController implements IRefreshButtonBindings {\n\n    private _textElement: any;\n    private _buttonElement: any;\n    private _width: number;\n\n    public text: string;\n    public visible: boolean;\n    public onRefresh: (param: {\n        $event: ng.IAngularEvent\n    }) => ng.IPromise < any > ;\n\n    constructor(\n        private $scope: ng.IScope,\n        private $element: any,\n        private $attrs: ng.IAttributes\n    ) {}\n\n    public $postLink() {\n        this._buttonElement = this.$element.children('.md-button');\n        this._textElement = this._buttonElement.children('.pip-refresh-text');\n\n        this.show();\n    }\n\n    public $onChanges(changes: RefreshButtonChanges) {\n        if (changes.visible.currentValue === true) {\n            this.text = changes.text.currentValue;\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    public onClick($event) {\n        if (this.onRefresh) {\n            this.onRefresh({\n                $event: $event\n            });\n        }\n    }\n\n    private show() {\n        if (this._textElement === undefined || this._buttonElement === undefined) {\n            return;\n        }\n        // Set new text\n        this._textElement.text(this.text);\n        // Show button\n        this._buttonElement.show();\n        // Adjust position\n        const width = this._buttonElement.width();\n        this._buttonElement.css('margin-left', '-' + width / 2 + 'px');\n    }\n\n    private hide() {\n        this._buttonElement.hide();\n    }\n}\n\n\nconst RefreshButtonComponent: ng.IComponentOptions = {\n    bindings: RefreshButtonBindings,\n    controller: RefreshButtonController,\n    template: '<md-button class=\"pip-refresh-button\" tabindex=\"-1\" ng-click=\"$ctrl.onClick($event)\" aria-label=\"REFRESH\">' +\n        '<md-icon md-svg-icon=\"icons:refresh\"></md-icon>' +\n        '<span class=\"pip-refresh-text\"></span>' +\n        '</md-button>'\n};\n\nangular\n    .module('pipRefreshButton', ['ngMaterial'])\n    .component('pipRefreshButton', RefreshButtonComponent);\n\n}","{\n\nclass ToggleButton {\n    id: any;\n    name: string;\n    disabled: boolean;\n    level: number;\n    diselectable: boolean;\n    filled: boolean;\n}\n\ninterface IToggleButtonsBindings {\n    [key: string]: any;\n\n    ngDisabled: any;\n    buttons: any;\n    currentButtonValue: any;\n    currentButton: any;\n    multiselect: any;\n    change: any;\n    onlyToggle: any\n}\n\nconst ToggleButtonsBindings: IToggleButtonsBindings = {\n    ngDisabled: '<?',\n    buttons: '<pipButtons',\n    currentButtonValue: '=ngModel',\n    currentButton: '=?pipButtonObject',\n    multiselect: '<?pipMultiselect',\n    change: '&ngChange',\n    onlyToggle: '<?pipOnlyToggle'\n}\n\nclass ToggleButtonsChanges implements ng.IOnChangesObject, IToggleButtonsBindings {\n    [key: string]: ng.IChangesObject < any > ;\n    // Not one way bindings\n    currentButtonValue: any;\n    currentButton: any;\n    change: ng.IChangesObject < () => ng.IPromise < void >> ;\n    // One way bindings\n    ngDisabled: ng.IChangesObject < boolean > ;\n    buttons: ng.IChangesObject < ToggleButton[] > ;\n    multiselect: ng.IChangesObject < boolean > ;\n    onlyToggle: ng.IChangesObject < boolean > ;\n}\n\nclass ToggleButtonsController implements IToggleButtonsBindings {\n    lenght: number;\n\n    public ngDisabled: boolean;\n    public class: string;\n    public multiselect: boolean;\n    public buttons: ToggleButton[];\n    public disabled: boolean;\n    public currentButtonValue: any;\n    public currentButtonIndex: number;\n    public currentButton: any;\n    public change: () => ng.IPromise < any > ;\n    public onlyToggle: boolean;\n    public pipMedia: any;\n\n    constructor(\n        private $element: any,\n        private $attrs: angular.IAttributes,\n        private $scope: angular.IScope,\n        private $timeout: ng.ITimeoutService,\n        $injector: ng.auto.IInjectorService\n    ) {\n        \"ngInject\";\n\n        this.pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\n        this.class = $attrs['class'] || '';\n        const index = _.indexOf(this.buttons, _.find(this.buttons, {\n            id: this.currentButtonValue\n        }));\n        this.currentButtonIndex = index < 0 ? 0 : index;\n        this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\n    }\n\n    public $onChanges(changes: ToggleButtonsChanges) {\n        this.multiselect = changes.multiselect ? changes.multiselect.currentValue : false;\n        this.disabled = changes.ngDisabled ? changes.ngDisabled.currentValue : false;\n        this.onlyToggle = changes.onlyToggle ? changes.onlyToggle.currentValue : false;\n\n        this.buttons = !changes.buttons || _.isArray(changes.buttons.currentValue) && changes.buttons.currentValue.length === 0 ? [] : changes.buttons.currentValue;\n\n        const index = _.indexOf(this.buttons, _.find(this.buttons, {\n            id: this.currentButtonValue\n        }));\n        this.currentButtonIndex = index < 0 ? 0 : index;\n        this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\n    }\n\n    public $postLink() {\n        this.$element\n            .on('focusin', () => {\n                this.$element.addClass('focused-container');\n            })\n            .on('focusout', () => {\n                this.$element.removeClass('focused-container');\n            });\n    }\n\n    public buttonSelected(index) {\n        if (this.disabled) {\n            return;\n        }\n\n        this.currentButtonIndex = index;\n        this.currentButton = this.buttons[this.currentButtonIndex];\n        this.currentButtonValue = this.currentButton.id || index;\n\n        this.$timeout(() => {\n            if (this.change) {\n                this.change();\n            }\n        });\n    }\n\n    public enterSpacePress(event) {\n        this.buttonSelected(event.index);\n    }\n\n    public highlightButton(index) {\n        if (this.multiselect &&\n            !_.isUndefined(this.currentButton.level) &&\n            !_.isUndefined(this.buttons[index].level)) {\n\n            return this.currentButton.level >= this.buttons[index].level;\n        }\n\n        return this.currentButtonIndex == index;\n    }\n}\n\nconst ToggleButtons: ng.IComponentOptions = {\n    bindings: ToggleButtonsBindings,\n    templateUrl: 'toggle_buttons/ToggleButtons.html',\n    controller: ToggleButtonsController\n}\n\nangular\n    .module('pipToggleButtons', ['pipButtons.Templates'])\n    .component('pipToggleButtons', ToggleButtons);\n\n}","(function(module) {\ntry {\n  module = angular.module('pipButtons.Templates');\n} catch (e) {\n  module = angular.module('pipButtons.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toggle_buttons/ToggleButtons.html',\n    '<div class=\"pip-toggle-buttons layout-row {{$ctrl.class}}\" pip-selected=\"$ctrl.bufButtonIndex\" pip-enter-space-press=\"$ctrl.enterSpacePress($event)\" ng-if=\"!$ctrl.pipMedia(\\'xs\\') || $ctrl.onlyToggle\"><md-button tabindex=\"-1\" ng-repeat=\"button in $ctrl.buttons\" ng-class=\"{\\'md-accent md-raised selected color-accent-bg\\' : $ctrl.highlightButton($index)}\" ng-attr-style=\"{{ \\'background-color:\\' + ($ctrl.highlightButton($index) ? button.backgroundColor : \\'\\') + \\'!important\\' }}\" class=\"pip-selectable pip-chip-button flex\" ng-click=\"$ctrl.buttonSelected($index, $event)\" ng-disabled=\"button.disabled || $ctrl.disabled\">{{button.name || button.title | translate}} <span ng-if=\"button.checked || button.complete || button.filled\" class=\"pip-tagged\">*</span></md-button></div><md-input-container class=\"md-block\" ng-if=\"$ctrl.pipMedia(\\'xs\\') && !$ctrl.onlyToggle\"><md-select ng-model=\"$ctrl.currentButtonIndex\" ng-disabled=\"$ctrl.disabled\" aria-label=\"DROPDOWN\" md-on-close=\"$ctrl.buttonSelected($ctrl.currentButtonIndex)\"><md-option ng-repeat=\"action in $ctrl.buttons\" value=\"{{ ::$index }}\">{{ (action.title || action.name) | translate }} <span ng-if=\"action.checked || action.complete || action.filled\" class=\"pip-tagged\">*</span></md-option></md-select></md-input-container>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-buttons-html.min.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZGVwZW5kZW5jaWVzL1RyYW5zbGF0ZUZpbHRlci50cyIsInNyYy9mYWJzL0ZhYlRvb2x0aXBWaXNpYmlsaXR5LnRzIiwic3JjL2luZGV4LnRzIiwic3JjL3JlZnJlc2hfYnV0dG9uL1JlZnJlc2hCdXR0b24udHMiLCJzcmMvdG9nZ2xlX2J1dHRvbnMvVG9nZ2xlQnV0dG9ucy50cyIsInRlbXAvcGlwLXdlYnVpLWJ1dHRvbnMtaHRtbC5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxDQUFDO0lBQ0csbUJBQW1CLFNBQW1DO1FBQ2xELElBQU0sWUFBWSxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsR0FBRyxJQUFJLENBQUM7UUFFMUYsTUFBTSxDQUFDLFVBQVUsR0FBVztZQUN4QixNQUFNLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxHQUFHLEdBQUcsR0FBRyxDQUFDO1FBQ3RFLENBQUMsQ0FBQTtJQUNMLENBQUM7SUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLHNCQUFzQixFQUFFLEVBQUUsQ0FBQztTQUNyQyxNQUFNLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQ3hDLENBQUM7OztBQ1hELENBQUM7SUFFRDtRQUtJLDBDQUNJLFFBQWEsRUFDYixNQUEyQixFQUMzQixNQUFzQixFQUN0QixRQUE0QixFQUM1QixNQUFNO1lBRU4sVUFBVSxDQUFDO1lBQ1gsSUFBSSxVQUFVLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDLEVBQ3RELFVBQVUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUMsRUFDaEQsVUFBVSxHQUFHLFVBQVUsQ0FBQyxNQUFNLENB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QUMsQ0FBQyxLQUFLLENBQUM7WUFDakUsQ0FBQztZQUVELE1BQU0sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLElBQUksS0FBSyxDQUFDO1FBQzVDLENBQUM7UUFDTCw4QkFBQztJQUFELENBdkZBLEFBdUZDLElBQUE7SUFFRCxJQUFNLGFBQWEsR0FBeUI7UUFDeEMsUUFBUSxFQUFFLHFCQUFxQjtRQUMvQixXQUFXLEVBQUUsbUNBQW1DO1FBQ2hELFVBQVUsRUFBRSx1QkFBdUI7S0FDdEMsQ0FBQTtJQUVELE9BQU87U0FDRixNQUFNLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1NBQ3BELFNBQVMsQ0FBQyxrQkFBa0IsRUFBRSxhQUFhLENBQUMsQ0FBQztBQUVsRCxDQUFDOzs7QUNqSkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ7XG4gICAgZnVuY3Rpb24gdHJhbnNsYXRlKCRpbmplY3RvcjogbmcuYXV0by5JSW5qZWN0b3JTZXJ2aWNlKSB7XG4gICAgICAgIGNvbnN0IHBpcFRyYW5zbGF0ZSA9ICRpbmplY3Rvci5oYXMoJ3BpcFRyYW5zbGF0ZScpID8gJGluamVjdG9yLmdldCgncGlwVHJhbnNsYXRlJykgOiBudWxsO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBwaXBUcmFuc2xhdGUgPyBwaXBUcmFuc2xhdGVbJ3RyYW5zbGF0ZSddKGtleSkgfHwga2V5IDoga2V5O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BpcEJ1dHRvbnMuVHJhbnNsYXRlJywgW10pXG4gICAgICAgIC5maWx0ZXIoJ3RyYW5zbGF0ZScsIHRyYW5zbGF0ZSk7XG59Iiwie1xuXG5jbGFzcyBGYWJUb29sdGlwVmlzaWJpbGl0eUNvbnRyb2xsZXIge1xuICAgIHByaXZhdGUgX2VsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfc2NvcGU6IGFuZ3VsYXIuSVNjb3BlO1xuICAgIHByaXZhdGUgX3RpbWVvdXQ6IG5nLklUaW1lb3V0U2VydmljZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICAkZWxlbWVudDogYW55LFxuICAgICAgICAkYXR0cnM6IGFuZ3VsYXIuSUF0dHJpYnV0ZXMsXG4gICAgICAgICRzY29wZTogYW5ndWxhci5JU2NvcGUsXG4gICAgICAgICR0aW1lb3V0OiBuZy5JVGltZW91dFNlcnZpY2UsXG4gICAgICAgICRwYXJzZVxuICAgICkge1xuICAgICAgICBcIm5nSW5qZWN0XCI7XG4gICAgICAgIGxldCB0cmlnR2V0dGVyID0gJHBhcnNlKCRhdHRyc1sncGlwRmFiVG9vbHRpcFZpc2liaWxpdHknXSksXG4gICAgICAgICAgICBzaG93R2V0dGVyID0gJHBhcnNlKCRhdHRyc1sncGlwRmFiU2hvd1Rvb2x0aXAnXSksXG4gICAgICAgICAgICBzaG93U2V0dGVyID0gc2hvd0dldHRlci5hc3NpZ247XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaCh0cmlnR2V0dGVyLCAoaXNPcGVuKSA9PiB7XG4gICAgICAgICAgICBpZiAoIV8uaXNGdW5jdGlvbihzaG93U2V0dGVyKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzaG93U2V0dGVyKCRzY29wZSwgaXNPcGVuKTtcbiAgICAgICAgICAgICAgICB9LCA2MDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaG93U2V0dGVyKCRzY29wZSwgaXNPcGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIHBpcEZhYlRvb2x0aXBWaXNpYmlsaXR5KCRwYXJzZSwgJHRpbWVvdXQpOiBuZy5JRGlyZWN0aXZlIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBzY29wZTogZmFsc2UsXG4gICAgICAgIGNvbnRyb2xsZXI6IEZhYlRvb2x0aXBWaXNpYmlsaXR5Q29udHJvbGxlclxuICAgIH07XG59XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdwaXBGYWJUb29sdGlwVmlzaWJpbGl0eScsIFtdKVxuICAgIC5kaXJlY3RpdmUoJ3BpcEZhYlRvb2x0aXBWaXNpYmlsaXR5JywgcGlwRmFiVG9vbHRpcFZpc2liaWxpdHkpO1xuXG59Iiwi77u/aW1wb3J0ICcuL3JlZnJlc2hfYnV0dG9uL1JlZnJlc2hCdXR0b24nO1xuaW1wb3J0ICcuL3RvZ2dsZV9idXR0b25zL1RvZ2dsZUJ1dHRvbnMnXG5pbXBvcnQgJy4vZmFicy9GYWJUb29sdGlwVmlzaWJpbGl0eSc7XG5cbmFuZ3VsYXIubW9kdWxlKCdwaXBCdXR0b25zJywgW1xuICAgICdwaXBUb2dnbGVCdXR0b25zJyxcbiAgICAncGlwUmVmcmVzaEJ1dHRvbicsXG4gICAgJ3BpcEZhYlRvb2x0aXBWaXNpYmlsaXR5J1xuXSk7Iiwie1xuXG5pbnRlcmZhY2UgSVJlZnJlc2hCdXR0b25CaW5kaW5ncyB7XG4gICAgW2tleTogc3RyaW5nXTogYW55O1xuXG4gICAgdGV4dDogYW55O1xuICAgIHZpc2libGU6IGFueTtcbiAgICBvblJlZnJlc2g6IGFueVxufVxuXG5jb25zdCBSZWZyZXNoQnV0dG9uQmluZGluZ3M6IElSZWZyZXNoQnV0dG9uQmluZGluZ3MgPSB7XG4gICAgdGV4dDogJzxwaXBUZXh0JyxcbiAgICB2aXNpYmxlOiAnPHBpcFZpc2libGUnLFxuICAgIG9uUmVmcmVzaDogJyY/cGlwUmVmcmVzaCdcbn1cblxuY2xhc3MgUmVmcmVzaEJ1dHRvbkNoYW5nZXMgaW1wbGVtZW50cyBuZy5JT25DaGFuZ2VzT2JqZWN0LCBJUmVmcmVzaEJ1dHRvbkJpbmRpbmdzIHtcbiAgICBba2V5OiBzdHJpbmddOiBuZy5JQ2hhbmdlc09iamVjdCA8IGFueSA+IDtcbiAgICAvLyBOb3Qgb25lIHdheSBiaW5kaW5nc1xuICAgIG9uUmVmcmVzaDogbmcuSUNoYW5nZXNPYmplY3QgPCAoe1xuICAgICAgICAkZXZlbnQ6IGFueVxuICAgIH0pID0+IG5nLklQcm9taXNlIDwgYW55ID4+IDtcbiAgICAvLyBPbmUgd2F5IGJpbmRpbmdzXG4gICAgdGV4dDogbmcuSUNoYW5nZXNPYmplY3QgPCBzdHJpbmcgPiA7XG4gICAgdmlzaWJsZTogbmcuSUNoYW5nZXNPYmplY3QgPCBib29sZWFuID4gO1xufVxuXG5jbGFzcyBSZWZyZXNoQnV0dG9uQ29udHJvbGxlciBpbXBsZW1lbnRzIElSZWZyZXNoQnV0dG9uQmluZGluZ3Mge1xuXG4gICAgcHJpdmF0ZSBfdGV4dEVsZW1lbnQ6IGFueTtcbiAgICBwcml2YXRlIF9idXR0b25FbGVtZW50OiBhbnk7XG4gICAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlcjtcblxuICAgIHB1YmxpYyB0ZXh0OiBzdHJpbmc7XG4gICAgcHVibGljIHZpc2libGU6IGJvb2xlYW47XG4gICAgcHVibGljIG9uUmVmcmVzaDogKHBhcmFtOiB7XG4gICAgICAgICRldmVudDogbmcuSUFuZ3VsYXJFdmVudFxuICAgIH0pID0+IG5nLklQcm9taXNlIDwgYW55ID4gO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgJHNjb3BlOiBuZy5JU2NvcGUsXG4gICAgICAgIHByaXZhdGUgJGVsZW1lbnQ6IGFueSxcbiAgICAgICAgcHJpdmF0ZSAkYXR0cnM6IG5nLklBdHRyaWJ1dGVzXG4gICAgKSB7fVxuXG4gICAgcHVibGljICRwb3N0TGluaygpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuJGVsZW1lbnQuY2hpbGRyZW4oJy5tZC1idXR0b24nKTtcbiAgICAgICAgdGhpcy5fdGV4dEVsZW1lbnQgPSB0aGlzLl9idXR0b25FbGVtZW50LmNoaWxkcmVuKCcucGlwLXJlZnJlc2gtdGV4dCcpO1xuXG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgIH1cblxuICAgIHB1YmxpYyAkb25DaGFuZ2VzKGNoYW5nZXM6IFJlZnJlc2hCdXR0b25DaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLnZpc2libGUuY3VycmVudFZhbHVlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgPSBjaGFuZ2VzLnRleHQuY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBvbkNsaWNrKCRldmVudCkge1xuICAgICAgICBpZiAodGhpcy5vblJlZnJlc2gpIHtcbiAgICAgICAgICAgIHRoaXMub25SZWZyZXNoKHtcbiAgICAgICAgICAgICAgICAkZXZlbnQ6ICRldmVudFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3coKSB7XG4gICAgICAgIGlmICh0aGlzLl90ZXh0RWxlbWVudCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX2J1dHRvbkVsZW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNldCBuZXcgdGV4dFxuICAgICAgICB0aGlzLl90ZXh0RWxlbWVudC50ZXh0KHRoaXMudGV4dCk7XG4gICAgICAgIC8vIFNob3cgYnV0dG9uXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2hvdygpO1xuICAgICAgICAvLyBBZGp1c3QgcG9zaXRpb25cbiAgICAgICAgY29uc3Qgd2lkdGggPSB0aGlzLl9idXR0b25FbGVtZW50LndpZHRoKCk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY3NzKCdtYXJnaW4tbGVmdCcsICctJyArIHdpZHRoIC8gMiArICdweCcpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaGlkZSgpIHtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5oaWRlKCk7XG4gICAgfVxufVxuXG5cbmNvbnN0IFJlZnJlc2hCdXR0b25Db21wb25lbnQ6IG5nLklDb21wb25lbnRPcHRpb25zID0ge1xuICAgIGJpbmRpbmdzOiBSZWZyZXNoQnV0dG9uQmluZGluZ3MsXG4gICAgY29udHJvbGxlcjogUmVmcmVzaEJ1dHRvbkNvbnRyb2xsZXIsXG4gICAgdGVtcGxhdGU6ICc8bWQtYnV0dG9uIGNsYXNzPVwicGlwLXJlZnJlc2gtYnV0dG9uXCIgdGFiaW5kZXg9XCItMVwiIG5nLWNsaWNrPVwiJGN0cmwub25DbGljaygkZXZlbnQpXCIgYXJpYS1sYWJlbD1cIlJFRlJFU0hcIj4nICtcbiAgICAgICAgJzxtZC1pY29uIG1kLXN2Zy1pY29uPVwiaWNvbnM6cmVmcmVzaFwiPjwvbWQtaWNvbj4nICtcbiAgICAgICAgJzxzcGFuIGNsYXNzPVwicGlwLXJlZnJlc2gtdGV4dFwiPjwvc3Bhbj4nICtcbiAgICAgICAgJzwvbWQtYnV0dG9uPidcbn07XG5cbmFuZ3VsYXJcbiAgICAubW9kdWxlKCdwaXBSZWZyZXNoQnV0dG9uJywgWyduZ01hdGVyaWFsJ10pXG4gICAgLmNvbXBvbmVudCgncGlwUmVmcmVzaEJ1dHRvbicsIFJlZnJlc2hCdXR0b25Db21wb25lbnQpO1xuXG59Iiwie1xuXG5jbGFzcyBUb2dnbGVCdXR0b24ge1xuICAgIGlkOiBhbnk7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRpc2FibGVkOiBib29sZWFuO1xuICAgIGxldmVsOiBudW1iZXI7XG4gICAgZGlzZWxlY3RhYmxlOiBib29sZWFuO1xuICAgIGZpbGxlZDogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIElUb2dnbGVCdXR0b25zQmluZGluZ3Mge1xuICAgIFtrZXk6IHN0cmluZ106IGFueTtcblxuICAgIG5nRGlzYWJsZWQ6IGFueTtcbiAgICBidXR0b25zOiBhbnk7XG4gICAgY3VycmVudEJ1dHRvblZhbHVlOiBhbnk7XG4gICAgY3VycmVudEJ1dHRvbjogYW55O1xuICAgIG11bHRpc2VsZWN0OiBhbnk7XG4gICAgY2hhbmdlOiBhbnk7XG4gICAgb25seVRvZ2dsZTogYW55XG59XG5cbmNvbnN0IFRvZ2dsZUJ1dHRvbnNCaW5kaW5nczogSVRvZ2dsZUJ1dHRvbnNCaW5kaW5ncyA9IHtcbiAgICBuZ0Rpc2FibGVkOiAnPD8nLFxuICAgIGJ1dHRvbnM6ICc8cGlwQnV0dG9ucycsXG4gICAgY3VycmVudEJ1dHRvblZhbHVlOiAnPW5nTW9kZWwnLFxuICAgIGN1cnJlbnRCdXR0b246ICc9P3BpcEJ1dHRvbk9iamVjdCcsXG4gICAgbXVsdGlzZWxlY3Q6ICc8P3BpcE11bHRpc2VsZWN0JyxcbiAgICBjaGFuZ2U6ICcmbmdDaGFuZ2UnLFxuICAgIG9ubHlUb2dnbGU6ICc8P3BpcE9ubHlUb2dnbGUnXG59XG5cbmNsYXNzIFRvZ2dsZUJ1dHRvbnNDaGFuZ2VzIGltcGxlbWVudHMgbmcuSU9uQ2hhbmdlc09iamVjdCwgSVRvZ2dsZUJ1dHRvbnNCaW5kaW5ncyB7XG4gICAgW2tleTogc3RyaW5nXTogbmcuSUNoYW5nZXNPYmplY3QgPCBhbnkgPiA7XG4gICAgLy8gTm90IG9uZSB3YXkgYmluZGluZ3NcbiAgICBjdXJyZW50QnV0dG9uVmFsdWU6IGFueTtcbiAgICBjdXJyZW50QnV0dG9uOiBhbnk7XG4gICAgY2hhbmdlOiBuZy5JQ2hhbmdlc09iamVjdCA8ICgpID0+IG5nLklQcm9taXNlIDwgdm9pZCA+PiA7XG4gICAgLy8gT25lIHdheSBiaW5kaW5nc1xuICAgIG5nRGlzYWJsZWQ6IG5nLklDaGFuZ2VzT2JqZWN0IDwgYm9vbGVhbiA+IDtcbiAgICBidXR0b25zOiBuZy5JQ2hhbmdlc09iamVjdCA8IFRvZ2dsZUJ1dHRvbltdID4gO1xuICAgIG11bHRpc2VsZWN0OiBuZy5JQ2hhbmdlc09iamVjdCA8IGJvb2xlYW4gPiA7XG4gICAgb25seVRvZ2dsZTogbmcuSUNoYW5nZXNPYmplY3QgPCBib29sZWFuID4gO1xufVxuXG5jbGFzcyBUb2dnbGVCdXR0b25zQ29udHJvbGxlciBpbXBsZW1lbnRzIElUb2dnbGVCdXR0b25zQmluZGluZ3Mge1xuICAgIGxlbmdodDogbnVtYmVyO1xuXG4gICAgcHVibGljIG5nRGlzYWJsZWQ6IGJvb2xlYW47XG4gICAgcHVibGljIGNsYXNzOiBzdHJpbmc7XG4gICAgcHVibGljIG11bHRpc2VsZWN0OiBib29sZWFuO1xuICAgIHB1YmxpYyBidXR0b25zOiBUb2dnbGVCdXR0b25bXTtcbiAgICBwdWJsaWMgZGlzYWJsZWQ6IGJvb2xlYW47XG4gICAgcHVibGljIGN1cnJlbnRCdXR0b25WYWx1ZTogYW55O1xuICAgIHB1YmxpYyBjdXJyZW50QnV0dG9uSW5kZXg6IG51bWJlcjtcbiAgICBwdWJsaWMgY3VycmVudEJ1dHRvbjogYW55O1xuICAgIHB1YmxpYyBjaGFuZ2U6ICgpID0+IG5nLklQcm9taXNlIDwgYW55ID4gO1xuICAgIHB1YmxpYyBvbmx5VG9nZ2xlOiBib29sZWFuO1xuICAgIHB1YmxpYyBwaXBNZWRpYTogYW55O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgJGVsZW1lbnQ6IGFueSxcbiAgICAgICAgcHJpdmF0ZSAkYXR0cnM6IGFuZ3VsYXIuSUF0dHJpYnV0ZXMsXG4gICAgICAgIHByaXZhdGUgJHNjb3BlOiBhbmd1bGFyLklTY29wZSxcbiAgICAgICAgcHJpdmF0ZSAkdGltZW91dDogbmcuSVRpbWVvdXRTZXJ2aWNlLFxuICAgICAgICAkaW5qZWN0b3I6IG5nLmF1dG8uSUluamVjdG9yU2VydmljZVxuICAgICkge1xuICAgICAgICBcIm5nSW5qZWN0XCI7XG5cbiAgICAgICAgdGhpcy5waXBNZWRpYSA9ICRpbmplY3Rvci5oYXMoJ3BpcE1lZGlhJykgPyAkaW5qZWN0b3IuZ2V0KCdwaXBNZWRpYScpIDogbnVsbDtcbiAgICAgICAgdGhpcy5jbGFzcyA9ICRhdHRyc1snY2xhc3MnXSB8fCAnJztcbiAgICAgICAgY29uc3QgaW5kZXggPSBfLmluZGV4T2YodGhpcy5idXR0b25zLCBfLmZpbmQodGhpcy5idXR0b25zLCB7XG4gICAgICAgICAgICBpZDogdGhpcy5jdXJyZW50QnV0dG9uVmFsdWVcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLmN1cnJlbnRCdXR0b25JbmRleCA9IGluZGV4IDwgMCA/IDAgOiBpbmRleDtcbiAgICAgICAgdGhpcy5jdXJyZW50QnV0dG9uID0gdGhpcy5idXR0b25zLmxlbmd0aCA+IDAgPyB0aGlzLmJ1dHRvbnNbdGhpcy5jdXJyZW50QnV0dG9uSW5kZXhdIDogdGhpcy5jdXJyZW50QnV0dG9uO1xuICAgIH1cblxuICAgIHB1YmxpYyAkb25DaGFuZ2VzKGNoYW5nZXM6IFRvZ2dsZUJ1dHRvbnNDaGFuZ2VzKSB7XG4gICAgICAgIHRoaXMubXVsdGlzZWxlY3QgPSBjaGFuZ2VzLm11bHRpc2VsZWN0ID8gY2hhbmdlcy5tdWx0aXNlbGVjdC5jdXJyZW50VmFsdWUgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGNoYW5nZXMubmdEaXNhYmxlZCA/IGNoYW5nZXMubmdEaXNhYmxlZC5jdXJyZW50VmFsdWUgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5vbmx5VG9nZ2xlID0gY2hhbmdlcy5vbmx5VG9nZ2xlID8gY2hhbmdlcy5vbmx5VG9nZ2xlLmN1cnJlbnRWYWx1ZSA6IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuYnV0dG9ucyA9ICFjaGFuZ2VzLmJ1dHRvbnMgfHwgXy5pc0FycmF5KGNoYW5nZXMuYnV0dG9ucy5jdXJyZW50VmFsdWUpICYmIGNoYW5nZXMuYnV0dG9ucy5jdXJyZW50VmFsdWUubGVuZ3RoID09PSAwID8gW10gOiBjaGFuZ2VzLmJ1dHRvbnMuY3VycmVudFZhbHVlO1xuXG4gICAgICAgIGNvbnN0IGluZGV4ID0gXy5pbmRleE9mKHRoaXMuYnV0dG9ucywgXy5maW5kKHRoaXMuYnV0dG9ucywge1xuICAgICAgICAgICAgaWQ6IHRoaXMuY3VycmVudEJ1dHRvblZhbHVlXG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5jdXJyZW50QnV0dG9uSW5kZXggPSBpbmRleCA8IDAgPyAwIDogaW5kZXg7XG4gICAgICAgIHRoaXMuY3VycmVudEJ1dHRvbiA9IHRoaXMuYnV0dG9ucy5sZW5ndGggPiAwID8gdGhpcy5idXR0b25zW3RoaXMuY3VycmVudEJ1dHRvbkluZGV4XSA6IHRoaXMuY3VycmVudEJ1dHRvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgJHBvc3RMaW5rKCkge1xuICAgICAgICB0aGlzLiRlbGVtZW50XG4gICAgICAgICAgICAub24oJ2ZvY3VzaW4nLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcygnZm9jdXNlZC1jb250YWluZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oJ2ZvY3Vzb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQtY29udGFpbmVyJyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYnV0dG9uU2VsZWN0ZWQoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3VycmVudEJ1dHRvbkluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuY3VycmVudEJ1dHRvbiA9IHRoaXMuYnV0dG9uc1t0aGlzLmN1cnJlbnRCdXR0b25JbmRleF07XG4gICAgICAgIHRoaXMuY3VycmVudEJ1dHRvblZhbHVlID0gdGhpcy5jdXJyZW50QnV0dG9uLmlkIHx8IGluZGV4O1xuXG4gICAgICAgIHRoaXMuJHRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGVudGVyU3BhY2VQcmVzcyhldmVudCkge1xuICAgICAgICB0aGlzLmJ1dHRvblNlbGVjdGVkKGV2ZW50LmluZGV4KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaGlnaGxpZ2h0QnV0dG9uKGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLm11bHRpc2VsZWN0ICYmXG4gICAgICAgICAgICAhXy5pc1VuZGVmaW5lZCh0aGlzLmN1cnJlbnRCdXR0b24ubGV2ZWwpICYmXG4gICAgICAgICAgICAhXy5pc1VuZGVmaW5lZCh0aGlzLmJ1dHRvbnNbaW5kZXhdLmxldmVsKSkge1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50QnV0dG9uLmxldmVsID49IHRoaXMuYnV0dG9uc1tpbmRleF0ubGV2ZWw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50QnV0dG9uSW5kZXggPT0gaW5kZXg7XG4gICAgfVxufVxuXG5jb25zdCBUb2dnbGVCdXR0b25zOiBuZy5JQ29tcG9uZW50T3B0aW9ucyA9IHtcbiAgICBiaW5kaW5nczogVG9nZ2xlQnV0dG9uc0JpbmRpbmdzLFxuICAgIHRlbXBsYXRlVXJsOiAndG9nZ2xlX2J1dHRvbnMvVG9nZ2xlQnV0dG9ucy5odG1sJyxcbiAgICBjb250cm9sbGVyOiBUb2dnbGVCdXR0b25zQ29udHJvbGxlclxufVxuXG5hbmd1bGFyXG4gICAgLm1vZHVsZSgncGlwVG9nZ2xlQnV0dG9ucycsIFsncGlwQnV0dG9ucy5UZW1wbGF0ZXMnXSlcbiAgICAuY29tcG9uZW50KCdwaXBUb2dnbGVCdXR0b25zJywgVG9nZ2xlQnV0dG9ucyk7XG5cbn0iLCIoZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwQnV0dG9ucy5UZW1wbGF0ZXMnKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEJ1dHRvbnMuVGVtcGxhdGVzJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCd0b2dnbGVfYnV0dG9ucy9Ub2dnbGVCdXR0b25zLmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwicGlwLXRvZ2dsZS1idXR0b25zIGxheW91dC1yb3cge3skY3RybC5jbGFzc319XCIgcGlwLXNlbGVjdGVkPVwiJGN0cmwuYnVmQnV0dG9uSW5kZXhcIiBwaXAtZW50ZXItc3BhY2UtcHJlc3M9XCIkY3RybC5lbnRlclNwYWNlUHJlc3MoJGV2ZW50KVwiIG5nLWlmPVwiISRjdHJsLnBpcE1lZGlhKFxcJ3hzXFwnKSB8fCAkY3RybC5vbmx5VG9nZ2xlXCI+PG1kLWJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgbmctcmVwZWF0PVwiYnV0dG9uIGluICRjdHJsLmJ1dHRvbnNcIiBuZy1jbGFzcz1cIntcXCdtZC1hY2NlbnQgbWQtcmFpc2VkIHNlbGVjdGVkIGNvbG9yLWFjY2VudC1iZ1xcJyA6ICRjdHJsLmhpZ2hsaWdodEJ1dHRvbigkaW5kZXgpfVwiIG5nLWF0dHItc3R5bGU9XCJ7eyBcXCdiYWNrZ3JvdW5kLWNvbG9yOlxcJyArICgkY3RybC5oaWdobGlnaHRCdXR0b24oJGluZGV4KSA/IGJ1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgOiBcXCdcXCcpICsgXFwnIWltcG9ydGFudFxcJyB9fVwiIGNsYXNzPVwicGlwLXNlbGVjdGFibGUgcGlwLWNoaXAtYnV0dG9uIGZsZXhcIiBuZy1jbGljaz1cIiRjdHJsLmJ1dHRvblNlbGVjdGVkKCRpbmRleCwgJGV2ZW50KVwiIG5nLWRpc2FibGVkPVwiYnV0dG9uLmRpc2FibGVkIHx8ICRjdHJsLmRpc2FibGVkXCI+e3tidXR0b24ubmFtZSB8fCBidXR0b24udGl0bGUgfCB0cmFuc2xhdGV9fSA8c3BhbiBuZy1pZj1cImJ1dHRvbi5jaGVja2VkIHx8IGJ1dHRvbi5jb21wbGV0ZSB8fCBidXR0b24uZmlsbGVkXCIgY2xhc3M9XCJwaXAtdGFnZ2VkXCI+Kjwvc3Bhbj48L21kLWJ1dHRvbj48L2Rpdj48bWQtaW5wdXQtY29udGFpbmVyIGNsYXNzPVwibWQtYmxvY2tcIiBuZy1pZj1cIiRjdHJsLnBpcE1lZGlhKFxcJ3hzXFwnKSAmJiAhJGN0cmwub25seVRvZ2dsZVwiPjxtZC1zZWxlY3QgbmctbW9kZWw9XCIkY3RybC5jdXJyZW50QnV0dG9uSW5kZXhcIiBuZy1kaXNhYmxlZD1cIiRjdHJsLmRpc2FibGVkXCIgYXJpYS1sYWJlbD1cIkRST1BET1dOXCIgbWQtb24tY2xvc2U9XCIkY3RybC5idXR0b25TZWxlY3RlZCgkY3RybC5jdXJyZW50QnV0dG9uSW5kZXgpXCI+PG1kLW9wdGlvbiBuZy1yZXBlYXQ9XCJhY3Rpb24gaW4gJGN0cmwuYnV0dG9uc1wiIHZhbHVlPVwie3sgOjokaW5kZXggfX1cIj57eyAoYWN0aW9uLnRpdGxlIHx8IGFjdGlvbi5uYW1lKSB8IHRyYW5zbGF0ZSB9fSA8c3BhbiBuZy1pZj1cImFjdGlvbi5jaGVja2VkIHx8IGFjdGlvbi5jb21wbGV0ZSB8fCBhY3Rpb24uZmlsbGVkXCIgY2xhc3M9XCJwaXAtdGFnZ2VkXCI+Kjwvc3Bhbj48L21kLW9wdGlvbj48L21kLXNlbGVjdD48L21kLWlucHV0LWNvbnRhaW5lcj4nKTtcbn1dKTtcbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcC13ZWJ1aS1idXR0b25zLWh0bWwubWluLmpzLm1hcFxuIl19"}