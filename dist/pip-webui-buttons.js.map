{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/buttons.ts","src/dependencies/translate.ts","src/fabs/fab_tooltip_visibility.ts","src/refresh_button/refresh_button.ts","src/toggle_buttons/toggle_buttons.ts","temp/pip-webui-buttons-html.min.js"],"names":[],"mappings":"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","file":"pip-webui-buttons.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","ï»¿/// <reference path=\"../typings/tsd.d.ts\" />\n\n(function () {\n    'use strict';\n\n    angular.module('pipButtons', [\n        'pipToggleButtons',\n        'pipRefreshButton',\n        'pipFabTooltipVisibility'\n    ]);\n\n})();\n\n","/// <reference path=\"../../typings/tsd.d.ts\" />\n\n(function () {\n    'use strict';\n\n    function ToggleButtonsFilter($injector: ng.auto.IInjectorService) {\n        const pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\n\n        return function(key: string) {\n            return pipTranslate  ? pipTranslate['translate'](key) || key : key;\n        }\n    }\n\n    angular.module('pipButtons.Translate', [])\n        .filter('translate', ToggleButtonsFilter);\n\n})();\n","/// <reference path=\"../../typings/tsd.d.ts\" />\n\nclass FabTooltipVisibilityController {\n    private _element;\n    private _scope: angular.IScope;\n    private _timeout: ng.ITimeoutService;\n\n    constructor(\n        $element: any,\n        $attrs: angular.IAttributes,\n        $scope: angular.IScope,\n        $timeout: ng.ITimeoutService,\n        $parse\n    ) {\n        \"ngInject\";\n        let trigGetter = $parse($attrs['pipFabTooltipVisibility']),\n            showGetter = $parse($attrs['pipFabShowTooltip']),\n            showSetter = showGetter.assign;\n\n        $scope.$watch(trigGetter, (isOpen) => {\n            if (!_.isFunction(showSetter)) return;\n\n            if (isOpen) {\n                $timeout(() => {\n                    showSetter($scope, isOpen);\n                }, 600);\n            } else {\n                showSetter($scope, isOpen);\n            }\n        });\n    }\n}\n\n(() => {\n    function pipFabTooltipVisibility($parse, $timeout) {\n        return {\n            restrict: 'A',\n            scope: false,\n            controller: FabTooltipVisibilityController\n        };\n    }\n\n    angular\n        .module('pipFabTooltipVisibility', [])\n        .directive('pipFabTooltipVisibility', pipFabTooltipVisibility);\n\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\n\ninterface IRefreshButtonBindings {\n    [key: string]: any;\n\n    text: any,\n    visible: any,\n    onRefresh: any\n}\n\nconst RefreshButtonBindings: IRefreshButtonBindings = {\n    text: '<pipText',\n    visible: '<pipVisible',\n    onRefresh: '&?pipRefresh'\n}\n\nclass RefreshButtonChanges implements ng.IOnChangesObject, IRefreshButtonBindings {\n    [key: string]: ng.IChangesObject<any>;\n    // Not one way bindings\n    onRefresh: ng.IChangesObject<({$event: any}) => ng.IPromise<any>>;\n    // One way bindings\n    text: ng.IChangesObject<string>;\n    visible: ng.IChangesObject<boolean>;\n}\n\nclass RefreshButtonController implements IRefreshButtonBindings {\n\n    private _textElement: any;\n    private _buttonElement: any;\n    private _width: number;\n\n    public text: string;\n    public visible: boolean;\n    public onRefresh: (param: {$event: ng.IAngularEvent}) => ng.IPromise<any>;\n\n    constructor(\n        private $scope: ng.IScope,\n        private $element: any,\n        private $attrs: ng.IAttributes\n    ) { }\n\n    public $postLink() {\n        this._buttonElement = this.$element.children('.md-button');\n        this._textElement = this._buttonElement.children('.pip-refresh-text');\n        \n        this.show();\n    }\n\n    public $onChanges(changes: RefreshButtonChanges) {\n        if (changes.visible.currentValue === true) {\n            this.text = changes.text.currentValue;\n            this.show();\n        } else {\n            this.hide();\n        }\n    }\n\n    public onClick($event) {\n        if (this.onRefresh) {\n            this.onRefresh({$event: $event});\n        }\n    }\n\n    private show() {\n        if (this._textElement === undefined || this._buttonElement === undefined) {\n            return;\n        }\n        // Set new text\n        this._textElement.text(this.text);\n        // Show button\n        this._buttonElement.show();\n        // Adjust position\n        const width = this._buttonElement.width();\n        this._buttonElement.css('margin-left', '-' + width / 2 + 'px');\n    }\n\n    private hide() {\n        this._buttonElement.hide();\n    }\n}\n\n\n(function () {\n    'use strict';\n\n    const RefreshButtonComponent = {\n        bindings: RefreshButtonBindings,\n        controller: RefreshButtonController,\n        template: '<md-button class=\"pip-refresh-button\" tabindex=\"-1\" ng-click=\"$ctrl.onClick($event)\" aria-label=\"REFRESH\">' +\n            '<md-icon md-svg-icon=\"icons:refresh\"></md-icon>' +\n            '<span class=\"pip-refresh-text\"></span>' +\n            '</md-button>'\n    };\n\n    angular.module('pipRefreshButton', ['ngMaterial'])\n        .component('pipRefreshButton', RefreshButtonComponent);\n\n})();","// /// <reference path=\"../../typings/tsd.d.ts\" />\n\nclass ToggleButton {\n    id: any;\n    name: string;\n    disabled: boolean;\n    level: number;\n    diselectable: boolean;\n    filled: boolean;\n}\n\ninterface IToggleButtonsBindings {\n    [key: string]: any;\n\n    ngDisabled: any,\n    buttons: any,\n    currentButtonValue: any,\n    currentButton: any,\n    multiselect: any,\n    change: any,\n    onlyToggle: any\n}\n\nconst ToggleButtonsBindings: IToggleButtonsBindings = {\n    ngDisabled: '<?',\n    buttons: '<pipButtons',\n    currentButtonValue: '=ngModel',\n    currentButton: '=?pipButtonObject',\n    multiselect: '<?pipMultiselect',\n    change: '&ngChange',\n    onlyToggle: '<?pipOnlyToggle'\n}\n\nclass ToggleButtonsChanges implements ng.IOnChangesObject, IToggleButtonsBindings {\n    [key: string]: ng.IChangesObject<any>;\n    // Not one way bindings\n    currentButtonValue: any;\n    currentButton: any;\n    change: ng.IChangesObject<() => ng.IPromise<void>>;\n    // One way bindings\n    ngDisabled: ng.IChangesObject<boolean>;\n    buttons: ng.IChangesObject<ToggleButton[]>;\n    multiselect: ng.IChangesObject<boolean>;\n    onlyToggle: ng.IChangesObject<boolean>;\n}\n\nclass ToggleButtonsController implements IToggleButtonsBindings {\n    lenght: number;\n\n    public ngDisabled: boolean;\n    public class: string;\n    public multiselect: boolean;\n    public buttons: ToggleButton[];\n    public disabled: boolean;\n    public currentButtonValue: any;\n    public currentButtonIndex: number;\n    public currentButton: any;\n    public change: () => ng.IPromise<any>;\n    public onlyToggle: boolean;\n    public pipMedia: any;\n\n    constructor(\n        private $element: any,\n        private $attrs: angular.IAttributes,\n        private $scope: angular.IScope,\n        private $timeout: ng.ITimeoutService,\n        $injector: ng.auto.IInjectorService\n    ) {\n        \"ngInject\";\n\n        this.pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\n        this.class = $attrs['class'] || '';\n        const index = _.indexOf(this.buttons, _.find(this.buttons, {\n            id: this.currentButtonValue\n        }));\n        this.currentButtonIndex = index < 0 ? 0 : index;\n        this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\n    }\n\n    public $onChanges(changes: ToggleButtonsChanges) {\n        this.multiselect = changes.multiselect ? changes.multiselect.currentValue : false;\n        this.disabled = changes.ngDisabled ? changes.ngDisabled.currentValue : false;\n        this.onlyToggle = changes.onlyToggle ? changes.onlyToggle.currentValue : false;\n\n        this.buttons = !changes.buttons || _.isArray(changes.buttons.currentValue) && changes.buttons.currentValue.length === 0 ? \n            [] : changes.buttons.currentValue;\n\n        const index = _.indexOf(this.buttons, _.find(this.buttons, {\n            id: this.currentButtonValue\n        }));\n        this.currentButtonIndex = index < 0 ? 0 : index;\n        this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\n    }\n\n    public $postLink() {\n        this.$element\n            .on('focusin', () => {\n                this.$element.addClass('focused-container');\n            })\n            .on('focusout', () => {\n                this.$element.removeClass('focused-container');\n            });\n    }\n\n    public buttonSelected(index) {\n        if (this.disabled) {\n            return;\n        }\n\n        this.currentButtonIndex = index;\n        this.currentButton = this.buttons[this.currentButtonIndex];\n        this.currentButtonValue = this.currentButton.id || index;\n\n        this.$timeout(() => {\n            if (this.change) {\n                this.change();\n            }\n        });\n    }\n\n    public enterSpacePress(event) {\n        this.buttonSelected(event.index);\n    }\n\n    public highlightButton(index) {\n        if (this.multiselect &&\n            !_.isUndefined(this.currentButton.level) &&\n            !_.isUndefined(this.buttons[index].level)) {\n\n            return this.currentButton.level >= this.buttons[index].level;\n        }\n\n        return this.currentButtonIndex == index;\n    }\n}\n\n(function () {\n    'use strict';\n\n    // We can use this variant, which requires less memory allocation\n    /*const ToggleButtons = {\n        bindings: ToggleButtonsBindings,\n        templateUrl: 'toggle_buttons/toggle_buttons.html',\n        controller: ToggleButtonsController,\n    }*/\n\n    // Or this variant, which safer\n    /*class ToggleButtons implements ng.IComponentOptions {\n        public bindings: IToggleButtonsBindings;\n        public controller: ng.Injectable<ng.IControllerConstructor>;\n        public templateUrl: string;\n\n        constructor() {\n            this.bindings = ToggleButtonsBindings;\n            this.controller = ToggleButtonsController;\n            this.templateUrl = 'toggle_buttons/toggle_buttons.html';\n        }\n    }*/\n\n    // Or, I think, this variant. \n    // This one is safe because we've specified interface and requires less memory allocation because we use constant.\n    const ToggleButtons: ng.IComponentOptions = {\n        bindings: ToggleButtonsBindings,\n        templateUrl: 'toggle_buttons/toggle_buttons.html',\n        controller: ToggleButtonsController\n    }\n\n    angular\n        .module('pipToggleButtons', ['pipButtons.Templates'])\n        .component('pipToggleButtons', ToggleButtons);\n    \n})();","(function(module) {\ntry {\n  module = angular.module('pipButtons.Templates');\n} catch (e) {\n  module = angular.module('pipButtons.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toggle_buttons/toggle_buttons.html',\n    '<div class=\"pip-toggle-buttons layout-row {{$ctrl.class}}\" pip-selected=\"$ctrl.bufButtonIndex\" pip-enter-space-press=\"$ctrl.enterSpacePress($event)\" ng-if=\"!$ctrl.pipMedia(\\'xs\\') || $ctrl.onlyToggle\"><md-button tabindex=\"-1\" ng-repeat=\"button in $ctrl.buttons\" ng-class=\"{\\'md-accent md-raised selected color-accent-bg\\' : $ctrl.highlightButton($index)}\" ng-attr-style=\"{{ \\'background-color:\\' + ($ctrl.highlightButton($index) ? button.backgroundColor : \\'\\') + \\'!important\\' }}\" class=\"pip-selectable pip-chip-button flex\" ng-click=\"$ctrl.buttonSelected($index, $event)\" ng-disabled=\"button.disabled || $ctrl.disabled\">{{button.name || button.title | translate}} <span ng-if=\"button.checked || button.complete || button.filled\" class=\"pip-tagged\">*</span></md-button></div><md-input-container class=\"md-block\" ng-if=\"$ctrl.pipMedia(\\'xs\\') && !$ctrl.onlyToggle\"><md-select ng-model=\"$ctrl.currentButtonIndex\" ng-disabled=\"$ctrl.disabled\" aria-label=\"DROPDOWN\" md-on-close=\"$ctrl.buttonSelected($ctrl.currentButtonIndex)\"><md-option ng-repeat=\"action in $ctrl.buttons\" value=\"{{ ::$index }}\">{{ (action.title || action.name) | translate }} <span ng-if=\"action.checked || action.complete || action.filled\" class=\"pip-tagged\">*</span></md-option></md-select></md-input-container>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-buttons-html.min.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYnV0dG9ucy50cyIsInNyYy9kZXBlbmRlbmNpZXMvdHJhbnNsYXRlLnRzIiwic3JjL2ZhYnMvZmFiX3Rvb2x0aXBfdmlzaWJpbGl0eS50cyIsInNyYy9yZWZyZXNoX2J1dHRvbi9yZWZyZXNoX2J1dHRvbi50cyIsInNyYy90b2dnbGVfYnV0dG9ucy90b2dnbGVfYnV0dG9ucy50cyIsInRlbXAvcGlwLXdlYnVpLWJ1dHRvbnMtaHRtbC5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNFQSxDQUFDO0lBQ0csWUFBWSxDQUFDO0lBRWIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUU7UUFDekIsa0JBQWtCO1FBQ2xCLGtCQUFrQjtRQUNsQix5QkFBeUI7S0FDNUIsQ0FBQyxDQUFDO0FBRVAsQ0FBQyxDQUFDLEVBQUUsQ0FBQzs7O0FDVEwsQ0FBQztJQUNHLFlBQVksQ0FBQztJQUViLDZCQUE2QixTQUFtQztRQUM1RCxJQUFNLFlBQVksR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBRTFGLE1BQU0sQ0FBQyxVQUFTLEdBQVc7WUFDdkIsTUFBTSxDQUFDLFlBQVksR0FBSSxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2RSxDQUFDLENBQUE7SUFDTCxDQUFDO0lBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRSxFQUFFLENBQUM7U0FDckMsTUFBTSxDQUFDLFdBQVcsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0FBRWxELENBQUMsQ0FBQyxFQUFFLENBQUM7OztBQ2RMO0lBS0ksd0NBQ0ksUUFBYSxFQUNiLE1BQTJCLEVBQzNCLE1BQXNCLEVBQ3RCLFFBQTRCLEVBQzVCLE1BQU07UUFFTixVQUFVLENBQUM7UUFDWCxJQUFJLFVBQVUsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLHlCQUF5QixDQUFDLENBQUMsRUFDdEQsVUFBVSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxFQUNoRCxVQUFVLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQztRQUVuQyxNQUFNLENBQUMsTUFBTSxDQUFDLFVBQVUsRUFBRSxVQUFDLE1BQU07WUFDN0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDO2dCQUFDLE1BQU0sQ0FBQztZQUV0QyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUNULFFBQVEsQ0FBQztvQkFDTCxVQUFVLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO2dCQUMvQixDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDWixDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ0osVUFBVSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztZQUMvQixDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBQ0wscUNBQUM7QUFBRCxDQTdCQSxBQTZCQyxJQUFBO0FBRUQsQ0FBQztJQUNHLGlDQUFpQyxNQUFNLEVBQUUsUUFBUTtRQUM3QyxNQUFNLENBQUM7WUFDSCxRQUFRLEVBQUUsR0FBRztZQUNiLEtBQUssRUFBRSxLQUFLO1lBQ1osVUFBVSxFQUFFLDhCQUE4QjtTQUM3QyxDQUFDO0lBQ04sQ0FBQztJQUVELE9BQU87U0FDRixNQUFNLENBQUMseUJBQXlCLEVBQUUsRUFBRSxDQUFDO1NBQ3JDLFNBQVMsQ0FBQyx5QkFBeUIsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO0FBRXZFLENBQUMsQ0FBQyxFQUFFLENBQUM7OztBQ3BDTCxJQUFNLHFCQUFxQixHQUEyQjtJQUNsRCxJQUFJLEVBQUUsVUFBVTtJQUNoQixPQUFPLEVBQUUsYUFBYTtJQUN0QixTQUFTLEVBQUUsY0FBYztDQUM1QixDQUFBO0FBRUQ7SUFBQTtJQU9BLENBQUM7SUFBRCwyQkFBQztBQUFELENBUEEsQUFPQyxJQUFBO0FBRUQ7SUFVSSxpQ0FDWSxNQUFpQixFQUNqQixRQUFhLEVBQ2IsTUFBc0I7UUFGdEIsV0FBTSxHQUFOLE1BQU0sQ0FBVztRQUNqQixhQUFRLEdBQVIsUUFBUSxDQUFLO1FBQ2IsV0FBTSxHQUFOLE1BQU0sQ0FBZ0I7SUFDOUIsQ0FBQztJQUVFLDJDQUFTLEdBQWhCO1FBQ0ksSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFFdEUsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2hCLENBQUM7SUFFTSw0Q0FBVSxHQUFqQixVQUFrQixPQUE2QjtRQUMzQyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFlBQVksS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLElBQUksQ0FBQyxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7WUFDdEMsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2hCLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNKLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNoQixDQUFDO0lBQ0wsQ0FBQztJQUVNLHlDQUFPLEdBQWQsVUFBZSxNQUFNO1FBQ2pCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ2pCLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBQyxNQUFNLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQztRQUNyQyxDQUFDO0lBQ0wsQ0FBQztJQUVPLHNDQUFJLEdBQVo7UUFDSSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxLQUFLLFNBQVMsSUFBSSxJQUFJLENBQUMsY0FBYyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDdkUsTUFBTSxDQUFDO1FBQ1gsQ0FBQztRQUVELElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVsQyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO1FBRTNCLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDMUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLEdBQUcsR0FBRyxLQUFLLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0lBQ25FLENBQUM7SUFFTyxzQ0FBSSxHQUFaO1FBQ0ksSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBQ0wsOEJBQUM7QUFBRCxDQXREQSxBQXNEQyxJQUFBO0FBR0QsQ0FBQztJQUNHLFlBQVksQ0FBQztJQUViLElBQU0sc0JBQXNCLEdBQUc7UUFDM0IsUUFBUSxFQUFFLHFCQUFxQjtRQUMvQixVQUFVLEVBQUUsdUJBQXVCO1FBQ25DLFFBQVEsRUFBRSw0R0FBNEc7WUFDbEgsaURBQWlEO1lBQ2pELHdDQUF3QztZQUN4QyxjQUFjO0tBQ3JCLENBQUM7SUFFRixPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFrQixFQUFFLENBQUMsWUFBWSxDQUFDLENBQUM7U0FDN0MsU0FBUyxDQUFDLGtCQUFrQixFQUFFLHNCQUFzQixDQUFDLENBQUM7QUFFL0QsQ0FBQyxDQUFDLEVBQUUsQ0FBQzs7O0FDL0ZMO0lBQUE7SUFPQSxDQUFDO0lBQUQsbUJBQUM7QUFBRCxDQVBBLEFBT0MsSUFBQTtBQWNELElBQU0scUJBQXFCLEdBQTJCO0lBQ2xELFVBQVUsRUFBRSxJQUFJO0lBQ2hCLE9BQU8sRUFBRSxhQUFhO0lBQ3RCLGtCQUFrQixFQUFFLFVBQVU7SUFDOUIsYUFBYSxFQUFFLG1CQUFtQjtJQUNsQyxXQUFXLEVBQUUsa0JBQWtCO0lBQy9CLE1BQU0sRUFBRSxXQUFXO0lBQ25CLFVBQVUsRUFBRSxpQkFBaUI7Q0FDaEMsQ0FBQTtBQUVEO0lBQUE7SUFXQSxDQUFDO0lBQUQsMkJBQUM7QUFBRCxDQVhBLEFBV0MsSUFBQTtBQUVEO0lBZUksaUNBQ1ksUUFBYSxFQUNiLE1BQTJCLEVBQzNCLE1BQXNCLEVBQ3RCLFFBQTRCLEVBQ3BDLFNBQW1DO1FBRW5DLFVBQVUsQ0FBQztRQU5ILGFBQVEsR0FBUixRQUFRLENBQUs7UUFDYixXQUFNLEdBQU4sTUFBTSxDQUFxQjtRQUMzQixXQUFNLEdBQU4sTUFBTSxDQUFnQjtRQUN0QixhQUFRLEdBQVIsUUFBUSxDQUFvQjtRQUtwQyxJQUFJLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUM7UUFDN0UsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ25DLElBQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDdkQsRUFBRSxFQUFFLElBQUksQ0FBQyxrQkFBa0I7U0FDOUIsQ0FBQyxDQUFDLENBQUM7UUFDSixJQUFJLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsS0FBSyxDQUFDO1FBQ2hELElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM5RyxDQUFDO0lBRU0sNENBQVUsR0FBakIsVUFBa0IsT0FBNkI7UUFDM0MsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUNsRixJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxZQUFZLEdBQUcsS0FBSyxDQUFDO1FBQzdFLElBQUksQ0FBQyxVQUFVLEdBQUcsT0FBTyxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7UUFFL0UsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxPQUFPLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLE1BQU0sS0FBSyxDQUFDO1lBQ25ILEVBQUUsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQztRQUV0QyxJQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ3ZELEVBQUUsRUFBRSxJQUFJLENBQUMsa0JBQWtCO1NBQzlCLENBQUMsQ0FBQyxDQUFDO1FBQ0osSUFBSSxDQUFDLGtCQUFrQixHQUFHLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztRQUNoRCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDOUcsQ0FBQztJQUVNLDJDQUFTLEdBQWhCO1FBQUEsaUJBUUM7UUFQRyxJQUFJLENBQUMsUUFBUTthQUNSLEVBQUUsQ0FBQyxTQUFTLEVBQUU7WUFDWCxLQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBQ2hELENBQUMsQ0FBQzthQUNELEVBQUUsQ0FBQyxVQUFVLEVBQUU7WUFDWixLQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyxDQUFDO0lBQ1gsQ0FBQztJQUVNLGdEQUFjLEdBQXJCLFVBQXNCLEtBQUs7UUFBM0IsaUJBY0M7UUFiRyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNoQixNQUFNLENBQUM7UUFDWCxDQUFDO1FBRUQsSUFBSSxDQUFDLGtCQUFrQixHQUFHLEtBQUssQ0FBQztRQUNoQyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxJQUFJLEtBQUssQ0FBQztRQUV6RCxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ1YsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQ2QsS0FBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ2xCLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFTSxpREFBZSxHQUF0QixVQUF1QixLQUFLO1FBQ3hCLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFTSxpREFBZSxHQUF0QixVQUF1QixLQUFLO1FBQ3hCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXO1lBQ2hCLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQztZQUN4QyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFNUMsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQ2pFLENBQUM7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLGtCQUFrQixJQUFJLEtBQUssQ0FBQztJQUM1QyxDQUFDO0lBQ0wsOEJBQUM7QUFBRCxDQXhGQSxBQXdGQyxJQUFBO0FBRUQsQ0FBQztJQUNHLFlBQVksQ0FBQztJQXdCYixJQUFNLGFBQWEsR0FBeUI7UUFDeEMsUUFBUSxFQUFFLHFCQUFxQjtRQUMvQixXQUFXLEVBQUUsb0NBQW9DO1FBQ2pELFVBQVUsRUFBRSx1QkFBdUI7S0FDdEMsQ0FBQTtJQUVELE9BQU87U0FDRixNQUFNLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1NBQ3BELFNBQVMsQ0FBQyxrQkFBa0IsRUFBRSxhQUFhLENBQUMsQ0FBQztBQUV0RCxDQUFDLENBQUMsRUFBRSxDQUFDOzs7QUMzS0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCLvu78vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BpcEJ1dHRvbnMnLCBbXG4gICAgICAgICdwaXBUb2dnbGVCdXR0b25zJyxcbiAgICAgICAgJ3BpcFJlZnJlc2hCdXR0b24nLFxuICAgICAgICAncGlwRmFiVG9vbHRpcFZpc2liaWxpdHknXG4gICAgXSk7XG5cbn0pKCk7XG5cbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cblxuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBUb2dnbGVCdXR0b25zRmlsdGVyKCRpbmplY3RvcjogbmcuYXV0by5JSW5qZWN0b3JTZXJ2aWNlKSB7XG4gICAgICAgIGNvbnN0IHBpcFRyYW5zbGF0ZSA9ICRpbmplY3Rvci5oYXMoJ3BpcFRyYW5zbGF0ZScpID8gJGluamVjdG9yLmdldCgncGlwVHJhbnNsYXRlJykgOiBudWxsO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihrZXk6IHN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHBpcFRyYW5zbGF0ZSAgPyBwaXBUcmFuc2xhdGVbJ3RyYW5zbGF0ZSddKGtleSkgfHwga2V5IDoga2V5O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BpcEJ1dHRvbnMuVHJhbnNsYXRlJywgW10pXG4gICAgICAgIC5maWx0ZXIoJ3RyYW5zbGF0ZScsIFRvZ2dsZUJ1dHRvbnNGaWx0ZXIpO1xuXG59KSgpO1xuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvdHNkLmQudHNcIiAvPlxuXG5jbGFzcyBGYWJUb29sdGlwVmlzaWJpbGl0eUNvbnRyb2xsZXIge1xuICAgIHByaXZhdGUgX2VsZW1lbnQ7XG4gICAgcHJpdmF0ZSBfc2NvcGU6IGFuZ3VsYXIuSVNjb3BlO1xuICAgIHByaXZhdGUgX3RpbWVvdXQ6IG5nLklUaW1lb3V0U2VydmljZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICAkZWxlbWVudDogYW55LFxuICAgICAgICAkYXR0cnM6IGFuZ3VsYXIuSUF0dHJpYnV0ZXMsXG4gICAgICAgICRzY29wZTogYW5ndWxhci5JU2NvcGUsXG4gICAgICAgICR0aW1lb3V0OiBuZy5JVGltZW91dFNlcnZpY2UsXG4gICAgICAgICRwYXJzZVxuICAgICkge1xuICAgICAgICBcIm5nSW5qZWN0XCI7XG4gICAgICAgIGxldCB0cmlnR2V0dGVyID0gJHBhcnNlKCRhdHRyc1sncGlwRmFiVG9vbHRpcFZpc2liaWxpdHknXSksXG4gICAgICAgICAgICBzaG93R2V0dGVyID0gJHBhcnNlKCRhdHRyc1sncGlwRmFiU2hvd1Rvb2x0aXAnXSksXG4gICAgICAgICAgICBzaG93U2V0dGVyID0gc2hvd0dldHRlci5hc3NpZ247XG5cbiAgICAgICAgJHNjb3BlLiR3YXRjaCh0cmlnR2V0dGVyLCAoaXNPcGVuKSA9PiB7XG4gICAgICAgICAgICBpZiAoIV8uaXNGdW5jdGlvbihzaG93U2V0dGVyKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzaG93U2V0dGVyKCRzY29wZSwgaXNPcGVuKTtcbiAgICAgICAgICAgICAgICB9LCA2MDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaG93U2V0dGVyKCRzY29wZSwgaXNPcGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4oKCkgPT4ge1xuICAgIGZ1bmN0aW9uIHBpcEZhYlRvb2x0aXBWaXNpYmlsaXR5KCRwYXJzZSwgJHRpbWVvdXQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICBzY29wZTogZmFsc2UsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBGYWJUb29sdGlwVmlzaWJpbGl0eUNvbnRyb2xsZXJcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ3BpcEZhYlRvb2x0aXBWaXNpYmlsaXR5JywgW10pXG4gICAgICAgIC5kaXJlY3RpdmUoJ3BpcEZhYlRvb2x0aXBWaXNpYmlsaXR5JywgcGlwRmFiVG9vbHRpcFZpc2liaWxpdHkpO1xuXG59KSgpOyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cblxuaW50ZXJmYWNlIElSZWZyZXNoQnV0dG9uQmluZGluZ3Mge1xuICAgIFtrZXk6IHN0cmluZ106IGFueTtcblxuICAgIHRleHQ6IGFueSxcbiAgICB2aXNpYmxlOiBhbnksXG4gICAgb25SZWZyZXNoOiBhbnlcbn1cblxuY29uc3QgUmVmcmVzaEJ1dHRvbkJpbmRpbmdzOiBJUmVmcmVzaEJ1dHRvbkJpbmRpbmdzID0ge1xuICAgIHRleHQ6ICc8cGlwVGV4dCcsXG4gICAgdmlzaWJsZTogJzxwaXBWaXNpYmxlJyxcbiAgICBvblJlZnJlc2g6ICcmP3BpcFJlZnJlc2gnXG59XG5cbmNsYXNzIFJlZnJlc2hCdXR0b25DaGFuZ2VzIGltcGxlbWVudHMgbmcuSU9uQ2hhbmdlc09iamVjdCwgSVJlZnJlc2hCdXR0b25CaW5kaW5ncyB7XG4gICAgW2tleTogc3RyaW5nXTogbmcuSUNoYW5nZXNPYmplY3Q8YW55PjtcbiAgICAvLyBOb3Qgb25lIHdheSBiaW5kaW5nc1xuICAgIG9uUmVmcmVzaDogbmcuSUNoYW5nZXNPYmplY3Q8KHskZXZlbnQ6IGFueX0pID0+IG5nLklQcm9taXNlPGFueT4+O1xuICAgIC8vIE9uZSB3YXkgYmluZGluZ3NcbiAgICB0ZXh0OiBuZy5JQ2hhbmdlc09iamVjdDxzdHJpbmc+O1xuICAgIHZpc2libGU6IG5nLklDaGFuZ2VzT2JqZWN0PGJvb2xlYW4+O1xufVxuXG5jbGFzcyBSZWZyZXNoQnV0dG9uQ29udHJvbGxlciBpbXBsZW1lbnRzIElSZWZyZXNoQnV0dG9uQmluZGluZ3Mge1xuXG4gICAgcHJpdmF0ZSBfdGV4dEVsZW1lbnQ6IGFueTtcbiAgICBwcml2YXRlIF9idXR0b25FbGVtZW50OiBhbnk7XG4gICAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlcjtcblxuICAgIHB1YmxpYyB0ZXh0OiBzdHJpbmc7XG4gICAgcHVibGljIHZpc2libGU6IGJvb2xlYW47XG4gICAgcHVibGljIG9uUmVmcmVzaDogKHBhcmFtOiB7JGV2ZW50OiBuZy5JQW5ndWxhckV2ZW50fSkgPT4gbmcuSVByb21pc2U8YW55PjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlICRzY29wZTogbmcuSVNjb3BlLFxuICAgICAgICBwcml2YXRlICRlbGVtZW50OiBhbnksXG4gICAgICAgIHByaXZhdGUgJGF0dHJzOiBuZy5JQXR0cmlidXRlc1xuICAgICkgeyB9XG5cbiAgICBwdWJsaWMgJHBvc3RMaW5rKCkge1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy4kZWxlbWVudC5jaGlsZHJlbignLm1kLWJ1dHRvbicpO1xuICAgICAgICB0aGlzLl90ZXh0RWxlbWVudCA9IHRoaXMuX2J1dHRvbkVsZW1lbnQuY2hpbGRyZW4oJy5waXAtcmVmcmVzaC10ZXh0Jyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNob3coKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgJG9uQ2hhbmdlcyhjaGFuZ2VzOiBSZWZyZXNoQnV0dG9uQ2hhbmdlcykge1xuICAgICAgICBpZiAoY2hhbmdlcy52aXNpYmxlLmN1cnJlbnRWYWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0ID0gY2hhbmdlcy50ZXh0LmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgb25DbGljaygkZXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMub25SZWZyZXNoKSB7XG4gICAgICAgICAgICB0aGlzLm9uUmVmcmVzaCh7JGV2ZW50OiAkZXZlbnR9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvdygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RleHRFbGVtZW50ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fYnV0dG9uRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IG5ldyB0ZXh0XG4gICAgICAgIHRoaXMuX3RleHRFbGVtZW50LnRleHQodGhpcy50ZXh0KTtcbiAgICAgICAgLy8gU2hvdyBidXR0b25cbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zaG93KCk7XG4gICAgICAgIC8vIEFkanVzdCBwb3NpdGlvblxuICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuX2J1dHRvbkVsZW1lbnQud2lkdGgoKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jc3MoJ21hcmdpbi1sZWZ0JywgJy0nICsgd2lkdGggLyAyICsgJ3B4Jyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoaWRlKCkge1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmhpZGUoKTtcbiAgICB9XG59XG5cblxuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBjb25zdCBSZWZyZXNoQnV0dG9uQ29tcG9uZW50ID0ge1xuICAgICAgICBiaW5kaW5nczogUmVmcmVzaEJ1dHRvbkJpbmRpbmdzLFxuICAgICAgICBjb250cm9sbGVyOiBSZWZyZXNoQnV0dG9uQ29udHJvbGxlcixcbiAgICAgICAgdGVtcGxhdGU6ICc8bWQtYnV0dG9uIGNsYXNzPVwicGlwLXJlZnJlc2gtYnV0dG9uXCIgdGFiaW5kZXg9XCItMVwiIG5nLWNsaWNrPVwiJGN0cmwub25DbGljaygkZXZlbnQpXCIgYXJpYS1sYWJlbD1cIlJFRlJFU0hcIj4nICtcbiAgICAgICAgICAgICc8bWQtaWNvbiBtZC1zdmctaWNvbj1cImljb25zOnJlZnJlc2hcIj48L21kLWljb24+JyArXG4gICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJwaXAtcmVmcmVzaC10ZXh0XCI+PC9zcGFuPicgK1xuICAgICAgICAgICAgJzwvbWQtYnV0dG9uPidcbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3BpcFJlZnJlc2hCdXR0b24nLCBbJ25nTWF0ZXJpYWwnXSlcbiAgICAgICAgLmNvbXBvbmVudCgncGlwUmVmcmVzaEJ1dHRvbicsIFJlZnJlc2hCdXR0b25Db21wb25lbnQpO1xuXG59KSgpOyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cblxuY2xhc3MgVG9nZ2xlQnV0dG9uIHtcbiAgICBpZDogYW55O1xuICAgIG5hbWU6IHN0cmluZztcbiAgICBkaXNhYmxlZDogYm9vbGVhbjtcbiAgICBsZXZlbDogbnVtYmVyO1xuICAgIGRpc2VsZWN0YWJsZTogYm9vbGVhbjtcbiAgICBmaWxsZWQ6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBJVG9nZ2xlQnV0dG9uc0JpbmRpbmdzIHtcbiAgICBba2V5OiBzdHJpbmddOiBhbnk7XG5cbiAgICBuZ0Rpc2FibGVkOiBhbnksXG4gICAgYnV0dG9uczogYW55LFxuICAgIGN1cnJlbnRCdXR0b25WYWx1ZTogYW55LFxuICAgIGN1cnJlbnRCdXR0b246IGFueSxcbiAgICBtdWx0aXNlbGVjdDogYW55LFxuICAgIGNoYW5nZTogYW55LFxuICAgIG9ubHlUb2dnbGU6IGFueVxufVxuXG5jb25zdCBUb2dnbGVCdXR0b25zQmluZGluZ3M6IElUb2dnbGVCdXR0b25zQmluZGluZ3MgPSB7XG4gICAgbmdEaXNhYmxlZDogJzw/JyxcbiAgICBidXR0b25zOiAnPHBpcEJ1dHRvbnMnLFxuICAgIGN1cnJlbnRCdXR0b25WYWx1ZTogJz1uZ01vZGVsJyxcbiAgICBjdXJyZW50QnV0dG9uOiAnPT9waXBCdXR0b25PYmplY3QnLFxuICAgIG11bHRpc2VsZWN0OiAnPD9waXBNdWx0aXNlbGVjdCcsXG4gICAgY2hhbmdlOiAnJm5nQ2hhbmdlJyxcbiAgICBvbmx5VG9nZ2xlOiAnPD9waXBPbmx5VG9nZ2xlJ1xufVxuXG5jbGFzcyBUb2dnbGVCdXR0b25zQ2hhbmdlcyBpbXBsZW1lbnRzIG5nLklPbkNoYW5nZXNPYmplY3QsIElUb2dnbGVCdXR0b25zQmluZGluZ3Mge1xuICAgIFtrZXk6IHN0cmluZ106IG5nLklDaGFuZ2VzT2JqZWN0PGFueT47XG4gICAgLy8gTm90IG9uZSB3YXkgYmluZGluZ3NcbiAgICBjdXJyZW50QnV0dG9uVmFsdWU6IGFueTtcbiAgICBjdXJyZW50QnV0dG9uOiBhbnk7XG4gICAgY2hhbmdlOiBuZy5JQ2hhbmdlc09iamVjdDwoKSA9PiBuZy5JUHJvbWlzZTx2b2lkPj47XG4gICAgLy8gT25lIHdheSBiaW5kaW5nc1xuICAgIG5nRGlzYWJsZWQ6IG5nLklDaGFuZ2VzT2JqZWN0PGJvb2xlYW4+O1xuICAgIGJ1dHRvbnM6IG5nLklDaGFuZ2VzT2JqZWN0PFRvZ2dsZUJ1dHRvbltdPjtcbiAgICBtdWx0aXNlbGVjdDogbmcuSUNoYW5nZXNPYmplY3Q8Ym9vbGVhbj47XG4gICAgb25seVRvZ2dsZTogbmcuSUNoYW5nZXNPYmplY3Q8Ym9vbGVhbj47XG59XG5cbmNsYXNzIFRvZ2dsZUJ1dHRvbnNDb250cm9sbGVyIGltcGxlbWVudHMgSVRvZ2dsZUJ1dHRvbnNCaW5kaW5ncyB7XG4gICAgbGVuZ2h0OiBudW1iZXI7XG5cbiAgICBwdWJsaWMgbmdEaXNhYmxlZDogYm9vbGVhbjtcbiAgICBwdWJsaWMgY2xhc3M6IHN0cmluZztcbiAgICBwdWJsaWMgbXVsdGlzZWxlY3Q6IGJvb2xlYW47XG4gICAgcHVibGljIGJ1dHRvbnM6IFRvZ2dsZUJ1dHRvbltdO1xuICAgIHB1YmxpYyBkaXNhYmxlZDogYm9vbGVhbjtcbiAgICBwdWJsaWMgY3VycmVudEJ1dHRvblZhbHVlOiBhbnk7XG4gICAgcHVibGljIGN1cnJlbnRCdXR0b25JbmRleDogbnVtYmVyO1xuICAgIHB1YmxpYyBjdXJyZW50QnV0dG9uOiBhbnk7XG4gICAgcHVibGljIGNoYW5nZTogKCkgPT4gbmcuSVByb21pc2U8YW55PjtcbiAgICBwdWJsaWMgb25seVRvZ2dsZTogYm9vbGVhbjtcbiAgICBwdWJsaWMgcGlwTWVkaWE6IGFueTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlICRlbGVtZW50OiBhbnksXG4gICAgICAgIHByaXZhdGUgJGF0dHJzOiBhbmd1bGFyLklBdHRyaWJ1dGVzLFxuICAgICAgICBwcml2YXRlICRzY29wZTogYW5ndWxhci5JU2NvcGUsXG4gICAgICAgIHByaXZhdGUgJHRpbWVvdXQ6IG5nLklUaW1lb3V0U2VydmljZSxcbiAgICAgICAgJGluamVjdG9yOiBuZy5hdXRvLklJbmplY3RvclNlcnZpY2VcbiAgICApIHtcbiAgICAgICAgXCJuZ0luamVjdFwiO1xuXG4gICAgICAgIHRoaXMucGlwTWVkaWEgPSAkaW5qZWN0b3IuaGFzKCdwaXBNZWRpYScpID8gJGluamVjdG9yLmdldCgncGlwTWVkaWEnKSA6IG51bGw7XG4gICAgICAgIHRoaXMuY2xhc3MgPSAkYXR0cnNbJ2NsYXNzJ10gfHwgJyc7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gXy5pbmRleE9mKHRoaXMuYnV0dG9ucywgXy5maW5kKHRoaXMuYnV0dG9ucywge1xuICAgICAgICAgICAgaWQ6IHRoaXMuY3VycmVudEJ1dHRvblZhbHVlXG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5jdXJyZW50QnV0dG9uSW5kZXggPSBpbmRleCA8IDAgPyAwIDogaW5kZXg7XG4gICAgICAgIHRoaXMuY3VycmVudEJ1dHRvbiA9IHRoaXMuYnV0dG9ucy5sZW5ndGggPiAwID8gdGhpcy5idXR0b25zW3RoaXMuY3VycmVudEJ1dHRvbkluZGV4XSA6IHRoaXMuY3VycmVudEJ1dHRvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgJG9uQ2hhbmdlcyhjaGFuZ2VzOiBUb2dnbGVCdXR0b25zQ2hhbmdlcykge1xuICAgICAgICB0aGlzLm11bHRpc2VsZWN0ID0gY2hhbmdlcy5tdWx0aXNlbGVjdCA/IGNoYW5nZXMubXVsdGlzZWxlY3QuY3VycmVudFZhbHVlIDogZmFsc2U7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSBjaGFuZ2VzLm5nRGlzYWJsZWQgPyBjaGFuZ2VzLm5nRGlzYWJsZWQuY3VycmVudFZhbHVlIDogZmFsc2U7XG4gICAgICAgIHRoaXMub25seVRvZ2dsZSA9IGNoYW5nZXMub25seVRvZ2dsZSA/IGNoYW5nZXMub25seVRvZ2dsZS5jdXJyZW50VmFsdWUgOiBmYWxzZTtcblxuICAgICAgICB0aGlzLmJ1dHRvbnMgPSAhY2hhbmdlcy5idXR0b25zIHx8IF8uaXNBcnJheShjaGFuZ2VzLmJ1dHRvbnMuY3VycmVudFZhbHVlKSAmJiBjaGFuZ2VzLmJ1dHRvbnMuY3VycmVudFZhbHVlLmxlbmd0aCA9PT0gMCA/IFxuICAgICAgICAgICAgW10gOiBjaGFuZ2VzLmJ1dHRvbnMuY3VycmVudFZhbHVlO1xuXG4gICAgICAgIGNvbnN0IGluZGV4ID0gXy5pbmRleE9mKHRoaXMuYnV0dG9ucywgXy5maW5kKHRoaXMuYnV0dG9ucywge1xuICAgICAgICAgICAgaWQ6IHRoaXMuY3VycmVudEJ1dHRvblZhbHVlXG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5jdXJyZW50QnV0dG9uSW5kZXggPSBpbmRleCA8IDAgPyAwIDogaW5kZXg7XG4gICAgICAgIHRoaXMuY3VycmVudEJ1dHRvbiA9IHRoaXMuYnV0dG9ucy5sZW5ndGggPiAwID8gdGhpcy5idXR0b25zW3RoaXMuY3VycmVudEJ1dHRvbkluZGV4XSA6IHRoaXMuY3VycmVudEJ1dHRvbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgJHBvc3RMaW5rKCkge1xuICAgICAgICB0aGlzLiRlbGVtZW50XG4gICAgICAgICAgICAub24oJ2ZvY3VzaW4nLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcygnZm9jdXNlZC1jb250YWluZXInKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oJ2ZvY3Vzb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQtY29udGFpbmVyJyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYnV0dG9uU2VsZWN0ZWQoaW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3VycmVudEJ1dHRvbkluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMuY3VycmVudEJ1dHRvbiA9IHRoaXMuYnV0dG9uc1t0aGlzLmN1cnJlbnRCdXR0b25JbmRleF07XG4gICAgICAgIHRoaXMuY3VycmVudEJ1dHRvblZhbHVlID0gdGhpcy5jdXJyZW50QnV0dG9uLmlkIHx8IGluZGV4O1xuXG4gICAgICAgIHRoaXMuJHRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGVudGVyU3BhY2VQcmVzcyhldmVudCkge1xuICAgICAgICB0aGlzLmJ1dHRvblNlbGVjdGVkKGV2ZW50LmluZGV4KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaGlnaGxpZ2h0QnV0dG9uKGluZGV4KSB7XG4gICAgICAgIGlmICh0aGlzLm11bHRpc2VsZWN0ICYmXG4gICAgICAgICAgICAhXy5pc1VuZGVmaW5lZCh0aGlzLmN1cnJlbnRCdXR0b24ubGV2ZWwpICYmXG4gICAgICAgICAgICAhXy5pc1VuZGVmaW5lZCh0aGlzLmJ1dHRvbnNbaW5kZXhdLmxldmVsKSkge1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50QnV0dG9uLmxldmVsID49IHRoaXMuYnV0dG9uc1tpbmRleF0ubGV2ZWw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50QnV0dG9uSW5kZXggPT0gaW5kZXg7XG4gICAgfVxufVxuXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIFdlIGNhbiB1c2UgdGhpcyB2YXJpYW50LCB3aGljaCByZXF1aXJlcyBsZXNzIG1lbW9yeSBhbGxvY2F0aW9uXG4gICAgLypjb25zdCBUb2dnbGVCdXR0b25zID0ge1xuICAgICAgICBiaW5kaW5nczogVG9nZ2xlQnV0dG9uc0JpbmRpbmdzLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3RvZ2dsZV9idXR0b25zL3RvZ2dsZV9idXR0b25zLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiBUb2dnbGVCdXR0b25zQ29udHJvbGxlcixcbiAgICB9Ki9cblxuICAgIC8vIE9yIHRoaXMgdmFyaWFudCwgd2hpY2ggc2FmZXJcbiAgICAvKmNsYXNzIFRvZ2dsZUJ1dHRvbnMgaW1wbGVtZW50cyBuZy5JQ29tcG9uZW50T3B0aW9ucyB7XG4gICAgICAgIHB1YmxpYyBiaW5kaW5nczogSVRvZ2dsZUJ1dHRvbnNCaW5kaW5ncztcbiAgICAgICAgcHVibGljIGNvbnRyb2xsZXI6IG5nLkluamVjdGFibGU8bmcuSUNvbnRyb2xsZXJDb25zdHJ1Y3Rvcj47XG4gICAgICAgIHB1YmxpYyB0ZW1wbGF0ZVVybDogc3RyaW5nO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kaW5ncyA9IFRvZ2dsZUJ1dHRvbnNCaW5kaW5ncztcbiAgICAgICAgICAgIHRoaXMuY29udHJvbGxlciA9IFRvZ2dsZUJ1dHRvbnNDb250cm9sbGVyO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZVVybCA9ICd0b2dnbGVfYnV0dG9ucy90b2dnbGVfYnV0dG9ucy5odG1sJztcbiAgICAgICAgfVxuICAgIH0qL1xuXG4gICAgLy8gT3IsIEkgdGhpbmssIHRoaXMgdmFyaWFudC4gXG4gICAgLy8gVGhpcyBvbmUgaXMgc2FmZSBiZWNhdXNlIHdlJ3ZlIHNwZWNpZmllZCBpbnRlcmZhY2UgYW5kIHJlcXVpcmVzIGxlc3MgbWVtb3J5IGFsbG9jYXRpb24gYmVjYXVzZSB3ZSB1c2UgY29uc3RhbnQuXG4gICAgY29uc3QgVG9nZ2xlQnV0dG9uczogbmcuSUNvbXBvbmVudE9wdGlvbnMgPSB7XG4gICAgICAgIGJpbmRpbmdzOiBUb2dnbGVCdXR0b25zQmluZGluZ3MsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndG9nZ2xlX2J1dHRvbnMvdG9nZ2xlX2J1dHRvbnMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6IFRvZ2dsZUJ1dHRvbnNDb250cm9sbGVyXG4gICAgfVxuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwaXBUb2dnbGVCdXR0b25zJywgWydwaXBCdXR0b25zLlRlbXBsYXRlcyddKVxuICAgICAgICAuY29tcG9uZW50KCdwaXBUb2dnbGVCdXR0b25zJywgVG9nZ2xlQnV0dG9ucyk7XG4gICAgXG59KSgpOyIsIihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBCdXR0b25zLlRlbXBsYXRlcycpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwQnV0dG9ucy5UZW1wbGF0ZXMnLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3RvZ2dsZV9idXR0b25zL3RvZ2dsZV9idXR0b25zLmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwicGlwLXRvZ2dsZS1idXR0b25zIGxheW91dC1yb3cge3skY3RybC5jbGFzc319XCIgcGlwLXNlbGVjdGVkPVwiJGN0cmwuYnVmQnV0dG9uSW5kZXhcIiBwaXAtZW50ZXItc3BhY2UtcHJlc3M9XCIkY3RybC5lbnRlclNwYWNlUHJlc3MoJGV2ZW50KVwiIG5nLWlmPVwiISRjdHJsLnBpcE1lZGlhKFxcJ3hzXFwnKSB8fCAkY3RybC5vbmx5VG9nZ2xlXCI+PG1kLWJ1dHRvbiB0YWJpbmRleD1cIi0xXCIgbmctcmVwZWF0PVwiYnV0dG9uIGluICRjdHJsLmJ1dHRvbnNcIiBuZy1jbGFzcz1cIntcXCdtZC1hY2NlbnQgbWQtcmFpc2VkIHNlbGVjdGVkIGNvbG9yLWFjY2VudC1iZ1xcJyA6ICRjdHJsLmhpZ2hsaWdodEJ1dHRvbigkaW5kZXgpfVwiIG5nLWF0dHItc3R5bGU9XCJ7eyBcXCdiYWNrZ3JvdW5kLWNvbG9yOlxcJyArICgkY3RybC5oaWdobGlnaHRCdXR0b24oJGluZGV4KSA/IGJ1dHRvbi5iYWNrZ3JvdW5kQ29sb3IgOiBcXCdcXCcpICsgXFwnIWltcG9ydGFudFxcJyB9fVwiIGNsYXNzPVwicGlwLXNlbGVjdGFibGUgcGlwLWNoaXAtYnV0dG9uIGZsZXhcIiBuZy1jbGljaz1cIiRjdHJsLmJ1dHRvblNlbGVjdGVkKCRpbmRleCwgJGV2ZW50KVwiIG5nLWRpc2FibGVkPVwiYnV0dG9uLmRpc2FibGVkIHx8ICRjdHJsLmRpc2FibGVkXCI+e3tidXR0b24ubmFtZSB8fCBidXR0b24udGl0bGUgfCB0cmFuc2xhdGV9fSA8c3BhbiBuZy1pZj1cImJ1dHRvbi5jaGVja2VkIHx8IGJ1dHRvbi5jb21wbGV0ZSB8fCBidXR0b24uZmlsbGVkXCIgY2xhc3M9XCJwaXAtdGFnZ2VkXCI+Kjwvc3Bhbj48L21kLWJ1dHRvbj48L2Rpdj48bWQtaW5wdXQtY29udGFpbmVyIGNsYXNzPVwibWQtYmxvY2tcIiBuZy1pZj1cIiRjdHJsLnBpcE1lZGlhKFxcJ3hzXFwnKSAmJiAhJGN0cmwub25seVRvZ2dsZVwiPjxtZC1zZWxlY3QgbmctbW9kZWw9XCIkY3RybC5jdXJyZW50QnV0dG9uSW5kZXhcIiBuZy1kaXNhYmxlZD1cIiRjdHJsLmRpc2FibGVkXCIgYXJpYS1sYWJlbD1cIkRST1BET1dOXCIgbWQtb24tY2xvc2U9XCIkY3RybC5idXR0b25TZWxlY3RlZCgkY3RybC5jdXJyZW50QnV0dG9uSW5kZXgpXCI+PG1kLW9wdGlvbiBuZy1yZXBlYXQ9XCJhY3Rpb24gaW4gJGN0cmwuYnV0dG9uc1wiIHZhbHVlPVwie3sgOjokaW5kZXggfX1cIj57eyAoYWN0aW9uLnRpdGxlIHx8IGFjdGlvbi5uYW1lKSB8IHRyYW5zbGF0ZSB9fSA8c3BhbiBuZy1pZj1cImFjdGlvbi5jaGVja2VkIHx8IGFjdGlvbi5jb21wbGV0ZSB8fCBhY3Rpb24uZmlsbGVkXCIgY2xhc3M9XCJwaXAtdGFnZ2VkXCI+Kjwvc3Bhbj48L21kLW9wdGlvbj48L21kLXNlbGVjdD48L21kLWlucHV0LWNvbnRhaW5lcj4nKTtcbn1dKTtcbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcC13ZWJ1aS1idXR0b25zLWh0bWwubWluLmpzLm1hcFxuIl19"}