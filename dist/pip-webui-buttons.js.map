{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/buttons.ts","src/dependencies/translate.ts","src/fabs/fab_tooltip_visibility.ts","src/refresh_button/refresh_button.ts","src/toggle_buttons/toggle_buttons.ts","temp/pip-webui-buttons-html.min.js"],"names":[],"mappings":"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","file":"pip-webui-buttons.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","ï»¿/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipButtons', [\r\n        'pipToggleButtons',\r\n        'pipRefreshButton',\r\n        'pipFabTooltipVisibility'\r\n    ]);\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipButtons.Translate', []);\r\n\r\n    thisModule.filter('translate', function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n/*\r\n(function(){\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipFabTooltipVisibility\", []);\r\n\r\n    thisModule.directive(\"pipFabTooltipVisibility\", function ($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            controller: function($scope, $attrs) {\r\n               \r\n            }\r\n        };\r\n    });\r\n\r\n})();*/\r\n\r\n\r\nclass FabTooltipVisibilityController {\r\n    private _element;\r\n    private _scope: angular.IScope;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    constructor(\r\n        $mdMedia: angular.material.IMedia,\r\n        $element: any,\r\n        $attrs: angular.IAttributes,\r\n        $scope: angular.IScope,\r\n        $timeout: ng.ITimeoutService,\r\n        $parse\r\n    ) {\r\n        \"ngInject\";\r\n          var trigGetter = $parse($attrs['pipFabTooltipVisibility']),\r\n                    showGetter = $parse(['pipFabShowTooltip']),\r\n                    showSetter = showGetter.assign;\r\n\r\n                $scope.$watch(trigGetter, (isOpen) => {\r\n                    if (isOpen) {\r\n                        $timeout(() => {\r\n                            showSetter($scope, isOpen);\r\n                        }, 600);\r\n                    } else {\r\n                        showSetter($scope, isOpen);\r\n                    }\r\n                });\r\n    }\r\n}\r\n\r\n(() => {\r\n    function pipFabTooltipVisibility($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            controller: FabTooltipVisibilityController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipFabTooltipVisibility', [])\r\n        .directive('pipFabTooltipVisibility', pipFabTooltipVisibility);\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipRefreshButton', ['ngMaterial']);\r\n\r\n    thisModule.directive('pipRefreshButton',\r\n        function ($parse) {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                template: String() +\r\n                '<md-button class=\"pip-refresh-button\" tabindex=\"-1\" ng-click=\"onClick($event)\" aria-label=\"REFRESH\">' +\r\n                '<md-icon md-svg-icon=\"icons:refresh\"></md-icon>' +\r\n                '<span class=\"pip-refresh-text\"></span>' +\r\n                '</md-button>',\r\n                replace: false,\r\n                link: function ($scope, $element, $attrs: any) {\r\n                    var width, text, show,\r\n                        textGetter = $parse($attrs.pipText),\r\n                        visibleGetter = $parse($attrs.pipVisible),\r\n                        refreshGetter = $parse($attrs.pipRefresh),\r\n                        $button = $element.children('.md-button'),\r\n                        $text = $button.children('.pip-refresh-text');\r\n\r\n                    show = function () {\r\n                        // Set a new text\r\n                        text = textGetter($scope);\r\n                        $text.text(text);\r\n\r\n                        // Show button\r\n                        $button.show();\r\n\r\n                        // Adjust position\r\n                        width = $button.width();\r\n                        $button.css('margin-left', '-' + width / 2 + 'px');\r\n                    };\r\n\r\n                    function hide() {\r\n                        $button.hide();\r\n                    }\r\n\r\n                    (<any>$scope).onClick = function () {\r\n                        refreshGetter($scope);\r\n                    };\r\n\r\n                    $scope.$watch(visibleGetter, function (newValue) {\r\n                        if (newValue) {\r\n                            show();\r\n                        } else {\r\n                            hide();\r\n                        }\r\n                    });\r\n\r\n                    $scope.$watch(textGetter, function (newValue: string) {\r\n                        $text.text(newValue);\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();","// /// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n// class ToggleButtonsController {\r\n//     private _element;\r\n//     private _scope: angular.IScope;\r\n//     private _timeout: ng.ITimeoutService;\r\n\r\n//     public $mdMedia: angular.material.IMedia;\r\n//     public class: string;\r\n//     public multiselect: boolean;\r\n//     public buttons;\r\n//     public currentButtonValue;\r\n//     public currentButtonIndex: number;\r\n//     public currentButton;\r\n//     public buttonSelected;\r\n//     public disabled;\r\n//     public enterSpacePress: Function;\r\n//     public ngDisabled: Function;\r\n//     public highlightButton;\r\n//     public change: Function;\r\n//     public onlyToggle: boolean;\r\n    \r\n//     constructor(\r\n//         $mdMedia: angular.material.IMedia,\r\n//         $element: any,\r\n//         $attrs: angular.IAttributes,\r\n//         $scope: angular.IScope,\r\n//         $timeout: ng.ITimeoutService\r\n//     ) {\r\n//         \"ngInject\";\r\n//          this.$mdMedia = $mdMedia;\r\n//          this.class = $attrs['class'] || '';\r\n//          this.multiselect = $scope['multiselect'] || false;\r\n//          this.ngDisabled = $scope['ngDisabled'];\r\n//          this.currentButtonValue = $scope['currentButtonValue'];\r\n//          this.currentButton = $scope['currentButton'];\r\n//          this.change = $scope['change'];\r\n//          this.onlyToggle = $scope['onlyToggle'];\r\n\r\n//          this.buttons = !$scope['buttons'] || _.isArray($scope['buttons']) && $scope['buttons'].length === 0 ? \r\n//                         [] : $scope['buttons'];\r\n         \r\n//         let index = _.indexOf(this.buttons, _.find(this.buttons, {id: this.currentButtonValue}));\r\n//         this.currentButtonIndex = index < 0 ? 0 : index;\r\n//         this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\r\n       \r\n//         this.buttonSelected = (index) => {\r\n//             if (this.disabled()) { return; }\r\n//             this.currentButtonIndex = index;\r\n//             this.currentButton = this.buttons[this.currentButtonIndex];\r\n//             this.currentButtonValue = this.currentButton.id || index;\r\n\r\n//             $timeout( () => {\r\n//                 if (this.change) {\r\n//                     this.change();\r\n//                 } });\r\n//         };\r\n\r\n//         this.enterSpacePress = (event) => {\r\n//              this.buttonSelected(event.index);\r\n//         };\r\n\r\n//         this.disabled = () => {\r\n//             if (this.ngDisabled) { \r\n//                 return this.ngDisabled(); \r\n//             }\r\n//         };\r\n\r\n//         this.highlightButton = (index) => {\r\n//             if (this.multiselect && \r\n//                 !_.isUndefined(this.currentButton.level) && \r\n//                 !_.isUndefined(this.buttons[index].level)) {\r\n\r\n//                 return this.currentButton.level >= this.buttons[index].level;\r\n//             } \r\n\r\n//             return this.currentButtonIndex == index;\r\n//         }\r\n//     }\r\n\r\n\r\n// }\r\n\r\n// (() => {\r\n//     function ToggleButtonsDirective() {\r\n//         return {\r\n//             restrict: 'EA',\r\n//             controller: ToggleButtonsController,\r\n//             controllerAs: 'toggle',\r\n//             scope: {\r\n//                 ngDisabled: '&',\r\n//                 buttons: '=pipButtons',\r\n//                 currentButtonValue: '=ngModel',\r\n//                 currentButton: '=?pipButtonObject',\r\n//                 multiselect: '=?pipMultiselect',\r\n//                 change: '&ngChange',\r\n//                 onlyToggle: '=?pipOnlyToggle'\r\n//             },\r\n//             link: function (scope, elem) {\r\n//                 elem\r\n//                     .on('focusin', function () {\r\n//                         elem.addClass('focused-container');\r\n//                     })\r\n//                     .on('focusout', function () {\r\n//                         elem.removeClass('focused-container');\r\n//                     });\r\n//             },\r\n//             templateUrl: 'toggle_buttons/toggle_buttons.html'\r\n//         };\r\n//     }\r\n\r\n//     angular\r\n//         .module('pipToggleButtons', ['pipButtons.Templates'])\r\n//         .directive('pipToggleButtons', ToggleButtonsDirective);\r\n\r\n// })();\r\n\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipToggleButtons', ['pipButtons.Templates']);\r\n\r\n    thisModule.directive('pipToggleButtons',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    buttons: '=pipButtons',\r\n                    currentButtonValue: '=ngModel',\r\n                    currentButton: '=?pipButtonObject',\r\n                    multiselect: '=?pipMultiselect',\r\n                    change: '&ngChange',\r\n                    onlyToggle: '=?pipOnlyToggle'\r\n                },\r\n                templateUrl: 'toggle_buttons/toggle_buttons.html',\r\n                controller: \r\n                function ($scope, $element, $attrs, $mdMedia, $timeout) {\r\n                    var index;\r\n\r\n                    $scope.$mdMedia = $mdMedia;\r\n                    $scope.class = $attrs.class || '';\r\n                    $scope.multiselect = $scope.multiselect || false;\r\n\r\n                    if (!$scope.buttons || _.isArray($scope.buttons) && $scope.buttons.length === 0) {\r\n                        $scope.buttons = [];\r\n                    }\r\n\r\n                    index = _.indexOf($scope.buttons, _.find($scope.buttons, {id: $scope.currentButtonValue}));\r\n                    $scope.currentButtonIndex = index < 0 ? 0 : index;\r\n                    $scope.currentButton = $scope.buttons.length > 0 ? $scope.buttons[$scope.currentButtonIndex]\r\n                        : $scope.currentButton;\r\n\r\n                    $scope.buttonSelected = function (index) {\r\n                        if ($scope.disabled()) {\r\n                            return;\r\n                        }\r\n                        \r\n                        if ($scope.buttons[index].diselectable === true && index === $scope.currentButtonIndex \r\n                                && $scope.buttons[index].level !== undefined) \r\n                        {\r\n                            let curLevel = $scope.buttons[index].level, tmp;\r\n                            curLevel--;\r\n\r\n                            tmp = _.findIndex($scope.buttons, (b) => { return b['level'] === curLevel; });\r\n                            index = tmp > -1 ? tmp: index;\r\n                        }\r\n\r\n                        $scope.currentButtonIndex = index;\r\n                        $scope.currentButton = $scope.buttons[$scope.currentButtonIndex];\r\n                        $scope.currentButtonValue = $scope.currentButton.id || index;\r\n\r\n                        $timeout(function () {\r\n                            if ($scope.change) {\r\n                                $scope.change();\r\n                            }\r\n                        });\r\n                    };\r\n\r\n                    $scope.enterSpacePress = function (event) {\r\n                        $scope.buttonSelected(event.index);\r\n                    };\r\n\r\n                    $scope.disabled = function () {\r\n                        if ($scope.ngDisabled) {\r\n                            return $scope.ngDisabled();\r\n                        }\r\n                    };\r\n\r\n                    $scope.highlightButton = function (index) {\r\n                        if ($scope.multiselect && $scope.currentButton.level !== undefined && $scope.buttons[index].level !== undefined) {\r\n                           return $scope.currentButton.level >= $scope.buttons[index].level;\r\n                        } else {\r\n                            return $scope.currentButtonIndex == index;\r\n                        }\r\n                    }\r\n                },\r\n                link: function (scope, elem) {\r\n                    elem\r\n                        .on('focusin', function () {\r\n                            elem.addClass('focused-container');\r\n                        })\r\n                        .on('focusout', function () {\r\n                            elem.removeClass('focused-container');\r\n                        });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})(); \r\n\r\n","(function(module) {\ntry {\n  module = angular.module('pipButtons.Templates');\n} catch (e) {\n  module = angular.module('pipButtons.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toggle_buttons/toggle_buttons.html',\n    '<div class=\"pip-toggle-buttons layout-row {{class}}\" pip-selected=\"bufButtonIndex\" pip-enter-space-press=\"enterSpacePress($event)\" ng-if=\"$mdMedia(\\'gt-xs\\') || onlyToggle\"><md-button tabindex=\"-1\" ng-repeat=\"button in buttons\" ng-class=\"{\\'md-accent md-raised selected color-accent-bg\\' : highlightButton($index)}\" ng-attr-style=\"{{ \\'background-color:\\' + (highlightButton($index) ? button.backgroundColor : \\'\\') + \\'!important\\' }}\" class=\"pip-selectable pip-chip-button flex\" ng-click=\"buttonSelected($index, $event)\" ng-disabled=\"button.disabled || disabled()\">{{button.name || button.title | translate}} <span ng-if=\"button.checked || button.complete || button.filled\" class=\"pip-tagged\">*</span></md-button></div><md-input-container class=\"md-block\" ng-if=\"$mdMedia(\\'xs\\') && !onlyToggle\"><md-select ng-model=\"currentButtonIndex\" ng-disabled=\"disabled()\" aria-label=\"DROPDOWN\" md-on-close=\"buttonSelected(currentButtonIndex)\"><md-option ng-repeat=\"action in buttons\" value=\"{{ ::$index }}\">{{ (action.title || action.name) | translate }} <span ng-if=\"action.checked || action.complete || action.filled\" class=\"pip-tagged\">*</span></md-option></md-select></md-input-container>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-buttons-html.min.js.map\n"],"preExisting":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYnV0dG9ucy50cyIsInNyYy9kZXBlbmRlbmNpZXMvdHJhbnNsYXRlLnRzIiwic3JjL2ZhYnMvZmFiX3Rvb2x0aXBfdmlzaWJpbGl0eS50cyIsInNyYy9yZWZyZXNoX2J1dHRvbi9yZWZyZXNoX2J1dHRvbi50cyIsInNyYy90b2dnbGVfYnV0dG9ucy90b2dnbGVfYnV0dG9ucy50cyIsInRlbXAvcGlwLXdlYnVpLWJ1dHRvbnMtaHRtbC5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNFQSxDQUFDO0lBQ0csWUFBWSxDQUFDO0lBRWIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUU7UUFDekIsa0JBQWtCO1FBQ2xCLGtCQUFrQjtRQUNsQix5QkFBeUI7S0FDNUIsQ0FBQyxDQUFDO0FBRVAsQ0FBQyxDQUFDLEVBQUUsQ0FBQzs7QUNUTCxDQUFDO0lBQ0csWUFBWSxDQUFDO0lBRWIsSUFBSSxVQUFVLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUU1RCxVQUFVLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxVQUFVLFNBQVM7UUFDOUMsSUFBSSxZQUFZLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUM7Y0FDMUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsR0FBRyxJQUFJLENBQUM7UUFFM0MsTUFBTSxDQUFDLFVBQVUsR0FBRztZQUNoQixNQUFNLENBQUMsWUFBWSxHQUFJLFlBQVksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNwRSxDQUFDLENBQUE7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUVQLENBQUMsQ0FBQyxFQUFFLENBQUM7O0FDSUw7SUFLSSx3Q0FDSSxRQUFpQyxFQUNqQyxRQUFhLEVBQ2IsTUFBMkIsRUFDM0IsTUFB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QyxDQUFDO2dCQUVGLE1BQU0sQ0FBQyxlQUFlLEdBQUcsVUFBVSxLQUFLO29CQUNwQyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxJQUFJLE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBSyxLQUFLLFNBQVMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDO3dCQUMvRyxNQUFNLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxLQUFLLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUM7b0JBQ3BFLENBQUM7b0JBQUMsSUFBSSxDQUFDLENBQUM7d0JBQ0osTUFBTSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsSUFBSSxLQUFLLENBQUM7b0JBQzlDLENBQUM7Z0JBQ0wsQ0FBQyxDQUFBO1lBQ0wsQ0FBQztZQUNELElBQUksRUFBRSxVQUFVLEtBQUssRUFBRSxJQUFJO2dCQUN2QixJQUFJO3FCQUNDLEVBQUUsQ0FBQyxTQUFTLEVBQUU7b0JBQ1gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO2dCQUN2QyxDQUFDLENBQUM7cUJBQ0QsRUFBRSxDQUFDLFVBQVUsRUFBRTtvQkFDWixJQUFJLENBQUMsV0FBVyxDQUFDLG1CQUFtQixDQUFDLENBQUM7Z0JBQzFDLENBQUMsQ0FBQyxDQUFDO1lBQ1gsQ0FBQztTQUNKLENBQUM7SUFDTixDQUFDLENBQ0osQ0FBQztBQUVOLENBQUMsQ0FBQyxFQUFFLENBQUM7O0FDbk5MO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwi77u/Ly8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGluZ3MvdHNkLmQudHNcIiAvPlxyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgncGlwQnV0dG9ucycsIFtcclxuICAgICAgICAncGlwVG9nZ2xlQnV0dG9ucycsXHJcbiAgICAgICAgJ3BpcFJlZnJlc2hCdXR0b24nLFxyXG4gICAgICAgICdwaXBGYWJUb29sdGlwVmlzaWJpbGl0eSdcclxuICAgIF0pO1xyXG5cclxufSkoKTtcclxuXHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIHRoaXNNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwQnV0dG9ucy5UcmFuc2xhdGUnLCBbXSk7XHJcblxyXG4gICAgdGhpc01vZHVsZS5maWx0ZXIoJ3RyYW5zbGF0ZScsIGZ1bmN0aW9uICgkaW5qZWN0b3IpIHtcclxuICAgICAgICB2YXIgcGlwVHJhbnNsYXRlID0gJGluamVjdG9yLmhhcygncGlwVHJhbnNsYXRlJykgXHJcbiAgICAgICAgICAgID8gJGluamVjdG9yLmdldCgncGlwVHJhbnNsYXRlJykgOiBudWxsO1xyXG5cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcGlwVHJhbnNsYXRlICA/IHBpcFRyYW5zbGF0ZS50cmFuc2xhdGUoa2V5KSB8fCBrZXkgOiBrZXk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59KSgpO1xyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XHJcbi8qXHJcbihmdW5jdGlvbigpe1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciB0aGlzTW9kdWxlID0gYW5ndWxhci5tb2R1bGUoXCJwaXBGYWJUb29sdGlwVmlzaWJpbGl0eVwiLCBbXSk7XHJcblxyXG4gICAgdGhpc01vZHVsZS5kaXJlY3RpdmUoXCJwaXBGYWJUb29sdGlwVmlzaWJpbGl0eVwiLCBmdW5jdGlvbiAoJHBhcnNlLCAkdGltZW91dCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIHNjb3BlOiBmYWxzZSxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlLCAkYXR0cnMpIHtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG59KSgpOyovXHJcblxyXG5cclxuY2xhc3MgRmFiVG9vbHRpcFZpc2liaWxpdHlDb250cm9sbGVyIHtcclxuICAgIHByaXZhdGUgX2VsZW1lbnQ7XHJcbiAgICBwcml2YXRlIF9zY29wZTogYW5ndWxhci5JU2NvcGU7XHJcbiAgICBwcml2YXRlIF90aW1lb3V0OiBuZy5JVGltZW91dFNlcnZpY2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgJG1kTWVkaWE6IGFuZ3VsYXIubWF0ZXJpYWwuSU1lZGlhLFxyXG4gICAgICAgICRlbGVtZW50OiBhbnksXHJcbiAgICAgICAgJGF0dHJzOiBhbmd1bGFyLklBdHRyaWJ1dGVzLFxyXG4gICAgICAgICRzY29wZTogYW5ndWxhci5JU2NvcGUsXHJcbiAgICAgICAgJHRpbWVvdXQ6IG5nLklUaW1lb3V0U2VydmljZSxcclxuICAgICAgICAkcGFyc2VcclxuICAgICkge1xyXG4gICAgICAgIFwibmdJbmplY3RcIjtcclxuICAgICAgICAgIHZhciB0cmlnR2V0dGVyID0gJHBhcnNlKCRhdHRyc1sncGlwRmFiVG9vbHRpcFZpc2liaWxpdHknXSksXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0dldHRlciA9ICRwYXJzZShbJ3BpcEZhYlNob3dUb29sdGlwJ10pLFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dTZXR0ZXIgPSBzaG93R2V0dGVyLmFzc2lnbjtcclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuJHdhdGNoKHRyaWdHZXR0ZXIsIChpc09wZW4pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNPcGVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZXR0ZXIoJHNjb3BlLCBpc09wZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA2MDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZXR0ZXIoJHNjb3BlLCBpc09wZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG4oKCkgPT4ge1xyXG4gICAgZnVuY3Rpb24gcGlwRmFiVG9vbHRpcFZpc2liaWxpdHkoJHBhcnNlLCAkdGltZW91dCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIHNjb3BlOiBmYWxzZSxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogRmFiVG9vbHRpcFZpc2liaWxpdHlDb250cm9sbGVyXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgncGlwRmFiVG9vbHRpcFZpc2liaWxpdHknLCBbXSlcclxuICAgICAgICAuZGlyZWN0aXZlKCdwaXBGYWJUb29sdGlwVmlzaWJpbGl0eScsIHBpcEZhYlRvb2x0aXBWaXNpYmlsaXR5KTtcclxuXHJcbn0pKCk7XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIHRoaXNNb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwUmVmcmVzaEJ1dHRvbicsIFsnbmdNYXRlcmlhbCddKTtcclxuXHJcbiAgICB0aGlzTW9kdWxlLmRpcmVjdGl2ZSgncGlwUmVmcmVzaEJ1dHRvbicsXHJcbiAgICAgICAgZnVuY3Rpb24gKCRwYXJzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICBzY29wZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogU3RyaW5nKCkgK1xyXG4gICAgICAgICAgICAgICAgJzxtZC1idXR0b24gY2xhc3M9XCJwaXAtcmVmcmVzaC1idXR0b25cIiB0YWJpbmRleD1cIi0xXCIgbmctY2xpY2s9XCJvbkNsaWNrKCRldmVudClcIiBhcmlhLWxhYmVsPVwiUkVGUkVTSFwiPicgK1xyXG4gICAgICAgICAgICAgICAgJzxtZC1pY29uIG1kLXN2Zy1pY29uPVwiaWNvbnM6cmVmcmVzaFwiPjwvbWQtaWNvbj4nICtcclxuICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInBpcC1yZWZyZXNoLXRleHRcIj48L3NwYW4+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9tZC1idXR0b24+JyxcclxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyczogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoLCB0ZXh0LCBzaG93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0R2V0dGVyID0gJHBhcnNlKCRhdHRycy5waXBUZXh0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUdldHRlciA9ICRwYXJzZSgkYXR0cnMucGlwVmlzaWJsZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hHZXR0ZXIgPSAkcGFyc2UoJGF0dHJzLnBpcFJlZnJlc2gpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkYnV0dG9uID0gJGVsZW1lbnQuY2hpbGRyZW4oJy5tZC1idXR0b24nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRleHQgPSAkYnV0dG9uLmNoaWxkcmVuKCcucGlwLXJlZnJlc2gtdGV4dCcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzaG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgYSBuZXcgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dEdldHRlcigkc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGV4dC50ZXh0KHRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hvdyBidXR0b25cclxuICAgICAgICAgICAgICAgICAgICAgICAgJGJ1dHRvbi5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGp1c3QgcG9zaXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGggPSAkYnV0dG9uLndpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRidXR0b24uY3NzKCdtYXJnaW4tbGVmdCcsICctJyArIHdpZHRoIC8gMiArICdweCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGhpZGUoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRidXR0b24uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+JHNjb3BlKS5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWZyZXNoR2V0dGVyKCRzY29wZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiR3YXRjaCh2aXNpYmxlR2V0dGVyLCBmdW5jdGlvbiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiR3YXRjaCh0ZXh0R2V0dGVyLCBmdW5jdGlvbiAobmV3VmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGV4dC50ZXh0KG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG5cclxufSkoKTsiLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XHJcblxyXG4vLyBjbGFzcyBUb2dnbGVCdXR0b25zQ29udHJvbGxlciB7XHJcbi8vICAgICBwcml2YXRlIF9lbGVtZW50O1xyXG4vLyAgICAgcHJpdmF0ZSBfc2NvcGU6IGFuZ3VsYXIuSVNjb3BlO1xyXG4vLyAgICAgcHJpdmF0ZSBfdGltZW91dDogbmcuSVRpbWVvdXRTZXJ2aWNlO1xyXG5cclxuLy8gICAgIHB1YmxpYyAkbWRNZWRpYTogYW5ndWxhci5tYXRlcmlhbC5JTWVkaWE7XHJcbi8vICAgICBwdWJsaWMgY2xhc3M6IHN0cmluZztcclxuLy8gICAgIHB1YmxpYyBtdWx0aXNlbGVjdDogYm9vbGVhbjtcclxuLy8gICAgIHB1YmxpYyBidXR0b25zO1xyXG4vLyAgICAgcHVibGljIGN1cnJlbnRCdXR0b25WYWx1ZTtcclxuLy8gICAgIHB1YmxpYyBjdXJyZW50QnV0dG9uSW5kZXg6IG51bWJlcjtcclxuLy8gICAgIHB1YmxpYyBjdXJyZW50QnV0dG9uO1xyXG4vLyAgICAgcHVibGljIGJ1dHRvblNlbGVjdGVkO1xyXG4vLyAgICAgcHVibGljIGRpc2FibGVkO1xyXG4vLyAgICAgcHVibGljIGVudGVyU3BhY2VQcmVzczogRnVuY3Rpb247XHJcbi8vICAgICBwdWJsaWMgbmdEaXNhYmxlZDogRnVuY3Rpb247XHJcbi8vICAgICBwdWJsaWMgaGlnaGxpZ2h0QnV0dG9uO1xyXG4vLyAgICAgcHVibGljIGNoYW5nZTogRnVuY3Rpb247XHJcbi8vICAgICBwdWJsaWMgb25seVRvZ2dsZTogYm9vbGVhbjtcclxuICAgIFxyXG4vLyAgICAgY29uc3RydWN0b3IoXHJcbi8vICAgICAgICAgJG1kTWVkaWE6IGFuZ3VsYXIubWF0ZXJpYWwuSU1lZGlhLFxyXG4vLyAgICAgICAgICRlbGVtZW50OiBhbnksXHJcbi8vICAgICAgICAgJGF0dHJzOiBhbmd1bGFyLklBdHRyaWJ1dGVzLFxyXG4vLyAgICAgICAgICRzY29wZTogYW5ndWxhci5JU2NvcGUsXHJcbi8vICAgICAgICAgJHRpbWVvdXQ6IG5nLklUaW1lb3V0U2VydmljZVxyXG4vLyAgICAgKSB7XHJcbi8vICAgICAgICAgXCJuZ0luamVjdFwiO1xyXG4vLyAgICAgICAgICB0aGlzLiRtZE1lZGlhID0gJG1kTWVkaWE7XHJcbi8vICAgICAgICAgIHRoaXMuY2xhc3MgPSAkYXR0cnNbJ2NsYXNzJ10gfHwgJyc7XHJcbi8vICAgICAgICAgIHRoaXMubXVsdGlzZWxlY3QgPSAkc2NvcGVbJ211bHRpc2VsZWN0J10gfHwgZmFsc2U7XHJcbi8vICAgICAgICAgIHRoaXMubmdEaXNhYmxlZCA9ICRzY29wZVsnbmdEaXNhYmxlZCddO1xyXG4vLyAgICAgICAgICB0aGlzLmN1cnJlbnRCdXR0b25WYWx1ZSA9ICRzY29wZVsnY3VycmVudEJ1dHRvblZhbHVlJ107XHJcbi8vICAgICAgICAgIHRoaXMuY3VycmVudEJ1dHRvbiA9ICRzY29wZVsnY3VycmVudEJ1dHRvbiddO1xyXG4vLyAgICAgICAgICB0aGlzLmNoYW5nZSA9ICRzY29wZVsnY2hhbmdlJ107XHJcbi8vICAgICAgICAgIHRoaXMub25seVRvZ2dsZSA9ICRzY29wZVsnb25seVRvZ2dsZSddO1xyXG5cclxuLy8gICAgICAgICAgdGhpcy5idXR0b25zID0gISRzY29wZVsnYnV0dG9ucyddIHx8IF8uaXNBcnJheSgkc2NvcGVbJ2J1dHRvbnMnXSkgJiYgJHNjb3BlWydidXR0b25zJ10ubGVuZ3RoID09PSAwID8gXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIFtdIDogJHNjb3BlWydidXR0b25zJ107XHJcbiAgICAgICAgIFxyXG4vLyAgICAgICAgIGxldCBpbmRleCA9IF8uaW5kZXhPZih0aGlzLmJ1dHRvbnMsIF8uZmluZCh0aGlzLmJ1dHRvbnMsIHtpZDogdGhpcy5jdXJyZW50QnV0dG9uVmFsdWV9KSk7XHJcbi8vICAgICAgICAgdGhpcy5jdXJyZW50QnV0dG9uSW5kZXggPSBpbmRleCA8IDAgPyAwIDogaW5kZXg7XHJcbi8vICAgICAgICAgdGhpcy5jdXJyZW50QnV0dG9uID0gdGhpcy5idXR0b25zLmxlbmd0aCA+IDAgPyB0aGlzLmJ1dHRvbnNbdGhpcy5jdXJyZW50QnV0dG9uSW5kZXhdIDogdGhpcy5jdXJyZW50QnV0dG9uO1xyXG4gICAgICAgXHJcbi8vICAgICAgICAgdGhpcy5idXR0b25TZWxlY3RlZCA9IChpbmRleCkgPT4ge1xyXG4vLyAgICAgICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCgpKSB7IHJldHVybjsgfVxyXG4vLyAgICAgICAgICAgICB0aGlzLmN1cnJlbnRCdXR0b25JbmRleCA9IGluZGV4O1xyXG4vLyAgICAgICAgICAgICB0aGlzLmN1cnJlbnRCdXR0b24gPSB0aGlzLmJ1dHRvbnNbdGhpcy5jdXJyZW50QnV0dG9uSW5kZXhdO1xyXG4vLyAgICAgICAgICAgICB0aGlzLmN1cnJlbnRCdXR0b25WYWx1ZSA9IHRoaXMuY3VycmVudEJ1dHRvbi5pZCB8fCBpbmRleDtcclxuXHJcbi8vICAgICAgICAgICAgICR0aW1lb3V0KCAoKSA9PiB7XHJcbi8vICAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGFuZ2UpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZSgpO1xyXG4vLyAgICAgICAgICAgICAgICAgfSB9KTtcclxuLy8gICAgICAgICB9O1xyXG5cclxuLy8gICAgICAgICB0aGlzLmVudGVyU3BhY2VQcmVzcyA9IChldmVudCkgPT4ge1xyXG4vLyAgICAgICAgICAgICAgdGhpcy5idXR0b25TZWxlY3RlZChldmVudC5pbmRleCk7XHJcbi8vICAgICAgICAgfTtcclxuXHJcbi8vICAgICAgICAgdGhpcy5kaXNhYmxlZCA9ICgpID0+IHtcclxuLy8gICAgICAgICAgICAgaWYgKHRoaXMubmdEaXNhYmxlZCkgeyBcclxuLy8gICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5nRGlzYWJsZWQoKTsgXHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICB9O1xyXG5cclxuLy8gICAgICAgICB0aGlzLmhpZ2hsaWdodEJ1dHRvbiA9IChpbmRleCkgPT4ge1xyXG4vLyAgICAgICAgICAgICBpZiAodGhpcy5tdWx0aXNlbGVjdCAmJiBcclxuLy8gICAgICAgICAgICAgICAgICFfLmlzVW5kZWZpbmVkKHRoaXMuY3VycmVudEJ1dHRvbi5sZXZlbCkgJiYgXHJcbi8vICAgICAgICAgICAgICAgICAhXy5pc1VuZGVmaW5lZCh0aGlzLmJ1dHRvbnNbaW5kZXhdLmxldmVsKSkge1xyXG5cclxuLy8gICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRCdXR0b24ubGV2ZWwgPj0gdGhpcy5idXR0b25zW2luZGV4XS5sZXZlbDtcclxuLy8gICAgICAgICAgICAgfSBcclxuXHJcbi8vICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRCdXR0b25JbmRleCA9PSBpbmRleDtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9XHJcblxyXG5cclxuLy8gfVxyXG5cclxuLy8gKCgpID0+IHtcclxuLy8gICAgIGZ1bmN0aW9uIFRvZ2dsZUJ1dHRvbnNEaXJlY3RpdmUoKSB7XHJcbi8vICAgICAgICAgcmV0dXJuIHtcclxuLy8gICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbi8vICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFRvZ2dsZUJ1dHRvbnNDb250cm9sbGVyLFxyXG4vLyAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICd0b2dnbGUnLFxyXG4vLyAgICAgICAgICAgICBzY29wZToge1xyXG4vLyAgICAgICAgICAgICAgICAgbmdEaXNhYmxlZDogJyYnLFxyXG4vLyAgICAgICAgICAgICAgICAgYnV0dG9uczogJz1waXBCdXR0b25zJyxcclxuLy8gICAgICAgICAgICAgICAgIGN1cnJlbnRCdXR0b25WYWx1ZTogJz1uZ01vZGVsJyxcclxuLy8gICAgICAgICAgICAgICAgIGN1cnJlbnRCdXR0b246ICc9P3BpcEJ1dHRvbk9iamVjdCcsXHJcbi8vICAgICAgICAgICAgICAgICBtdWx0aXNlbGVjdDogJz0/cGlwTXVsdGlzZWxlY3QnLFxyXG4vLyAgICAgICAgICAgICAgICAgY2hhbmdlOiAnJm5nQ2hhbmdlJyxcclxuLy8gICAgICAgICAgICAgICAgIG9ubHlUb2dnbGU6ICc9P3BpcE9ubHlUb2dnbGUnXHJcbi8vICAgICAgICAgICAgIH0sXHJcbi8vICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSkge1xyXG4vLyAgICAgICAgICAgICAgICAgZWxlbVxyXG4vLyAgICAgICAgICAgICAgICAgICAgIC5vbignZm9jdXNpbicsIGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5hZGRDbGFzcygnZm9jdXNlZC1jb250YWluZXInKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICB9KVxyXG4vLyAgICAgICAgICAgICAgICAgICAgIC5vbignZm9jdXNvdXQnLCBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQtY29udGFpbmVyJyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbi8vICAgICAgICAgICAgIH0sXHJcbi8vICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndG9nZ2xlX2J1dHRvbnMvdG9nZ2xlX2J1dHRvbnMuaHRtbCdcclxuLy8gICAgICAgICB9O1xyXG4vLyAgICAgfVxyXG5cclxuLy8gICAgIGFuZ3VsYXJcclxuLy8gICAgICAgICAubW9kdWxlKCdwaXBUb2dnbGVCdXR0b25zJywgWydwaXBCdXR0b25zLlRlbXBsYXRlcyddKVxyXG4vLyAgICAgICAgIC5kaXJlY3RpdmUoJ3BpcFRvZ2dsZUJ1dHRvbnMnLCBUb2dnbGVCdXR0b25zRGlyZWN0aXZlKTtcclxuXHJcbi8vIH0pKCk7XHJcblxyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgdGhpc01vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBUb2dnbGVCdXR0b25zJywgWydwaXBCdXR0b25zLlRlbXBsYXRlcyddKTtcclxuXHJcbiAgICB0aGlzTW9kdWxlLmRpcmVjdGl2ZSgncGlwVG9nZ2xlQnV0dG9ucycsXHJcbiAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgIG5nRGlzYWJsZWQ6ICcmJyxcclxuICAgICAgICAgICAgICAgICAgICBidXR0b25zOiAnPXBpcEJ1dHRvbnMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCdXR0b25WYWx1ZTogJz1uZ01vZGVsJyxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50QnV0dG9uOiAnPT9waXBCdXR0b25PYmplY3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIG11bHRpc2VsZWN0OiAnPT9waXBNdWx0aXNlbGVjdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiAnJm5nQ2hhbmdlJyxcclxuICAgICAgICAgICAgICAgICAgICBvbmx5VG9nZ2xlOiAnPT9waXBPbmx5VG9nZ2xlJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndG9nZ2xlX2J1dHRvbnMvdG9nZ2xlX2J1dHRvbnMuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICRtZE1lZGlhLCAkdGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRtZE1lZGlhID0gJG1kTWVkaWE7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsYXNzID0gJGF0dHJzLmNsYXNzIHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tdWx0aXNlbGVjdCA9ICRzY29wZS5tdWx0aXNlbGVjdCB8fCBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkc2NvcGUuYnV0dG9ucyB8fCBfLmlzQXJyYXkoJHNjb3BlLmJ1dHRvbnMpICYmICRzY29wZS5idXR0b25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYnV0dG9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBfLmluZGV4T2YoJHNjb3BlLmJ1dHRvbnMsIF8uZmluZCgkc2NvcGUuYnV0dG9ucywge2lkOiAkc2NvcGUuY3VycmVudEJ1dHRvblZhbHVlfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50QnV0dG9uSW5kZXggPSBpbmRleCA8IDAgPyAwIDogaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRCdXR0b24gPSAkc2NvcGUuYnV0dG9ucy5sZW5ndGggPiAwID8gJHNjb3BlLmJ1dHRvbnNbJHNjb3BlLmN1cnJlbnRCdXR0b25JbmRleF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgOiAkc2NvcGUuY3VycmVudEJ1dHRvbjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJ1dHRvblNlbGVjdGVkID0gZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuZGlzYWJsZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmJ1dHRvbnNbaW5kZXhdLmRpc2VsZWN0YWJsZSA9PT0gdHJ1ZSAmJiBpbmRleCA9PT0gJHNjb3BlLmN1cnJlbnRCdXR0b25JbmRleCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAkc2NvcGUuYnV0dG9uc1tpbmRleF0ubGV2ZWwgIT09IHVuZGVmaW5lZCkgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJMZXZlbCA9ICRzY29wZS5idXR0b25zW2luZGV4XS5sZXZlbCwgdG1wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGV2ZWwtLTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXAgPSBfLmZpbmRJbmRleCgkc2NvcGUuYnV0dG9ucywgKGIpID0+IHsgcmV0dXJuIGJbJ2xldmVsJ10gPT09IGN1ckxldmVsOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gdG1wID4gLTEgPyB0bXA6IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY3VycmVudEJ1dHRvbkluZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50QnV0dG9uID0gJHNjb3BlLmJ1dHRvbnNbJHNjb3BlLmN1cnJlbnRCdXR0b25JbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jdXJyZW50QnV0dG9uVmFsdWUgPSAkc2NvcGUuY3VycmVudEJ1dHRvbi5pZCB8fCBpbmRleDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuY2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZW50ZXJTcGFjZVByZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5idXR0b25TZWxlY3RlZChldmVudC5pbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRpc2FibGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm5nRGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUubmdEaXNhYmxlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmhpZ2hsaWdodEJ1dHRvbiA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLm11bHRpc2VsZWN0ICYmICRzY29wZS5jdXJyZW50QnV0dG9uLmxldmVsICE9PSB1bmRlZmluZWQgJiYgJHNjb3BlLmJ1dHRvbnNbaW5kZXhdLmxldmVsICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5jdXJyZW50QnV0dG9uLmxldmVsID49ICRzY29wZS5idXR0b25zW2luZGV4XS5sZXZlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuY3VycmVudEJ1dHRvbkluZGV4ID09IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdmb2N1c2luJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5hZGRDbGFzcygnZm9jdXNlZC1jb250YWluZXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdmb2N1c291dCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQtY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcblxyXG59KSgpOyBcclxuXHJcbiIsIihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBCdXR0b25zLlRlbXBsYXRlcycpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgncGlwQnV0dG9ucy5UZW1wbGF0ZXMnLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJ3RvZ2dsZV9idXR0b25zL3RvZ2dsZV9idXR0b25zLmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwicGlwLXRvZ2dsZS1idXR0b25zIGxheW91dC1yb3cge3tjbGFzc319XCIgcGlwLXNlbGVjdGVkPVwiYnVmQnV0dG9uSW5kZXhcIiBwaXAtZW50ZXItc3BhY2UtcHJlc3M9XCJlbnRlclNwYWNlUHJlc3MoJGV2ZW50KVwiIG5nLWlmPVwiJG1kTWVkaWEoXFwnZ3QteHNcXCcpIHx8IG9ubHlUb2dnbGVcIj48bWQtYnV0dG9uIHRhYmluZGV4PVwiLTFcIiBuZy1yZXBlYXQ9XCJidXR0b24gaW4gYnV0dG9uc1wiIG5nLWNsYXNzPVwie1xcJ21kLWFjY2VudCBtZC1yYWlzZWQgc2VsZWN0ZWQgY29sb3ItYWNjZW50LWJnXFwnIDogaGlnaGxpZ2h0QnV0dG9uKCRpbmRleCl9XCIgbmctYXR0ci1zdHlsZT1cInt7IFxcJ2JhY2tncm91bmQtY29sb3I6XFwnICsgKGhpZ2hsaWdodEJ1dHRvbigkaW5kZXgpID8gYnV0dG9uLmJhY2tncm91bmRDb2xvciA6IFxcJ1xcJykgKyBcXCchaW1wb3J0YW50XFwnIH19XCIgY2xhc3M9XCJwaXAtc2VsZWN0YWJsZSBwaXAtY2hpcC1idXR0b24gZmxleFwiIG5nLWNsaWNrPVwiYnV0dG9uU2VsZWN0ZWQoJGluZGV4LCAkZXZlbnQpXCIgbmctZGlzYWJsZWQ9XCJidXR0b24uZGlzYWJsZWQgfHwgZGlzYWJsZWQoKVwiPnt7YnV0dG9uLm5hbWUgfHwgYnV0dG9uLnRpdGxlIHwgdHJhbnNsYXRlfX0gPHNwYW4gbmctaWY9XCJidXR0b24uY2hlY2tlZCB8fCBidXR0b24uY29tcGxldGUgfHwgYnV0dG9uLmZpbGxlZFwiIGNsYXNzPVwicGlwLXRhZ2dlZFwiPio8L3NwYW4+PC9tZC1idXR0b24+PC9kaXY+PG1kLWlucHV0LWNvbnRhaW5lciBjbGFzcz1cIm1kLWJsb2NrXCIgbmctaWY9XCIkbWRNZWRpYShcXCd4c1xcJykgJiYgIW9ubHlUb2dnbGVcIj48bWQtc2VsZWN0IG5nLW1vZGVsPVwiY3VycmVudEJ1dHRvbkluZGV4XCIgbmctZGlzYWJsZWQ9XCJkaXNhYmxlZCgpXCIgYXJpYS1sYWJlbD1cIkRST1BET1dOXCIgbWQtb24tY2xvc2U9XCJidXR0b25TZWxlY3RlZChjdXJyZW50QnV0dG9uSW5kZXgpXCI+PG1kLW9wdGlvbiBuZy1yZXBlYXQ9XCJhY3Rpb24gaW4gYnV0dG9uc1wiIHZhbHVlPVwie3sgOjokaW5kZXggfX1cIj57eyAoYWN0aW9uLnRpdGxlIHx8IGFjdGlvbi5uYW1lKSB8IHRyYW5zbGF0ZSB9fSA8c3BhbiBuZy1pZj1cImFjdGlvbi5jaGVja2VkIHx8IGFjdGlvbi5jb21wbGV0ZSB8fCBhY3Rpb24uZmlsbGVkXCIgY2xhc3M9XCJwaXAtdGFnZ2VkXCI+Kjwvc3Bhbj48L21kLW9wdGlvbj48L21kLXNlbGVjdD48L21kLWlucHV0LWNvbnRhaW5lcj4nKTtcbn1dKTtcbn0pKCk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcC13ZWJ1aS1idXR0b25zLWh0bWwubWluLmpzLm1hcFxuIl19"}