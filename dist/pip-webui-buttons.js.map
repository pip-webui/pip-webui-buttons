{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/buttons.ts","src/dependencies/translate.ts","src/fabs/fab_tooltip_visibility.ts","src/refresh_button/refresh_button.ts","src/toggle_buttons/toggle_buttons.ts","temp/pip-webui-buttons-html.min.js"],"names":[],"mappings":"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","file":"pip-webui-buttons.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","ï»¿/// <reference path=\"../typings/tsd.d.ts\" />\n\n(function () {\n    'use strict';\n\n    angular.module('pipButtons', [\n        'pipToggleButtons',\n        'pipRefreshButton',\n        'pipFabTooltipVisibility'\n    ]);\n\n})();\n\n","/// <reference path=\"../../typings/tsd.d.ts\" />\n\n(function () {\n    'use strict';\n\n    function ToggleButtonsFilter($injector: ng.auto.IInjectorService) {\n        const pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\n\n        return function(key: string) {\n            return pipTranslate  ? pipTranslate['translate'](key) || key : key;\n        }\n    }\n\n    angular.module('pipButtons.Translate', [])\n        .filter('translate', ToggleButtonsFilter);\n\n})();\n","/// <reference path=\"../../typings/tsd.d.ts\" />\n\n(function () {\n    'use strict';\n\n    class FabTooltipVisibilityController {\n        private _element;\n        private _scope: angular.IScope;\n        private _timeout: ng.ITimeoutService;\n\n        constructor(\n            $element: any,\n            $attrs: angular.IAttributes,\n            $scope: angular.IScope,\n            $timeout: ng.ITimeoutService,\n            $parse\n        ) {\n            \"ngInject\";\n            let trigGetter = $parse($attrs['pipFabTooltipVisibility']),\n                showGetter = $parse($attrs['pipFabShowTooltip']),\n                showSetter = showGetter.assign;\n\n            $scope.$watch(trigGetter, (isOpen) => {\n                if (!_.isFunction(showSetter)) return;\n\n                if (isOpen) {\n                    $timeout(() => {\n                        showSetter($scope, isOpen);\n                    }, 600);\n                } else {\n                    showSetter($scope, isOpen);\n                }\n            });\n        }\n    }\n\n\n    function pipFabTooltipVisibility($parse, $timeout) {\n        return {\n            restrict: 'A',\n            scope: false,\n            controller: FabTooltipVisibilityController\n        };\n    }\n\n    angular\n        .module('pipFabTooltipVisibility', [])\n        .directive('pipFabTooltipVisibility', pipFabTooltipVisibility);\n\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\n\n(function () {\n    'use strict';\n\n    interface IRefreshButtonBindings {\n        [key: string]: any;\n\n        text: any,\n            visible: any,\n            onRefresh: any\n    }\n\n    const RefreshButtonBindings: IRefreshButtonBindings = {\n        text: '<pipText',\n        visible: '<pipVisible',\n        onRefresh: '&?pipRefresh'\n    }\n\n    class RefreshButtonChanges implements ng.IOnChangesObject, IRefreshButtonBindings {\n        [key: string]: ng.IChangesObject < any > ;\n        // Not one way bindings\n        onRefresh: ng.IChangesObject < ({\n            $event: any\n        }) => ng.IPromise < any >> ;\n        // One way bindings\n        text: ng.IChangesObject < string > ;\n        visible: ng.IChangesObject < boolean > ;\n    }\n\n    class RefreshButtonController implements IRefreshButtonBindings {\n\n        private _textElement: any;\n        private _buttonElement: any;\n        private _width: number;\n\n        public text: string;\n        public visible: boolean;\n        public onRefresh: (param: {\n            $event: ng.IAngularEvent\n        }) => ng.IPromise < any > ;\n\n        constructor(\n            private $scope: ng.IScope,\n            private $element: any,\n            private $attrs: ng.IAttributes\n        ) {}\n\n        public $postLink() {\n            this._buttonElement = this.$element.children('.md-button');\n            this._textElement = this._buttonElement.children('.pip-refresh-text');\n\n            this.show();\n        }\n\n        public $onChanges(changes: RefreshButtonChanges) {\n            if (changes.visible.currentValue === true) {\n                this.text = changes.text.currentValue;\n                this.show();\n            } else {\n                this.hide();\n            }\n        }\n\n        public onClick($event) {\n            if (this.onRefresh) {\n                this.onRefresh({\n                    $event: $event\n                });\n            }\n        }\n\n        private show() {\n            if (this._textElement === undefined || this._buttonElement === undefined) {\n                return;\n            }\n            // Set new text\n            this._textElement.text(this.text);\n            // Show button\n            this._buttonElement.show();\n            // Adjust position\n            const width = this._buttonElement.width();\n            this._buttonElement.css('margin-left', '-' + width / 2 + 'px');\n        }\n\n        private hide() {\n            this._buttonElement.hide();\n        }\n    }\n\n\n    const RefreshButtonComponent: ng.IComponentOptions = {\n        bindings: RefreshButtonBindings,\n        controller: RefreshButtonController,\n        template: '<md-button class=\"pip-refresh-button\" tabindex=\"-1\" ng-click=\"$ctrl.onClick($event)\" aria-label=\"REFRESH\">' +\n            '<md-icon md-svg-icon=\"icons:refresh\"></md-icon>' +\n            '<span class=\"pip-refresh-text\"></span>' +\n            '</md-button>'\n    };\n\n    angular.module('pipRefreshButton', ['ngMaterial'])\n        .component('pipRefreshButton', RefreshButtonComponent);\n\n})();","// /// <reference path=\"../../typings/tsd.d.ts\" />\n\n(function () {\n    'use strict';\n\n    class ToggleButton {\n        id: any;\n        name: string;\n        disabled: boolean;\n        level: number;\n        diselectable: boolean;\n        filled: boolean;\n    }\n\n    interface IToggleButtonsBindings {\n        [key: string]: any;\n\n        ngDisabled: any;\n        buttons: any;\n        currentButtonValue: any;\n        currentButton: any;\n        multiselect: any;\n        change: any;\n        onlyToggle: any\n    }\n\n    const ToggleButtonsBindings: IToggleButtonsBindings = {\n        ngDisabled: '<?',\n        buttons: '<pipButtons',\n        currentButtonValue: '=ngModel',\n        currentButton: '=?pipButtonObject',\n        multiselect: '<?pipMultiselect',\n        change: '&ngChange',\n        onlyToggle: '<?pipOnlyToggle'\n    }\n\n    class ToggleButtonsChanges implements ng.IOnChangesObject, IToggleButtonsBindings {\n        [key: string]: ng.IChangesObject < any > ;\n        // Not one way bindings\n        currentButtonValue: any;\n        currentButton: any;\n        change: ng.IChangesObject < () => ng.IPromise < void >> ;\n        // One way bindings\n        ngDisabled: ng.IChangesObject < boolean > ;\n        buttons: ng.IChangesObject < ToggleButton[] > ;\n        multiselect: ng.IChangesObject < boolean > ;\n        onlyToggle: ng.IChangesObject < boolean > ;\n    }\n\n    class ToggleButtonsController implements IToggleButtonsBindings {\n        lenght: number;\n\n        public ngDisabled: boolean;\n        public class: string;\n        public multiselect: boolean;\n        public buttons: ToggleButton[];\n        public disabled: boolean;\n        public currentButtonValue: any;\n        public currentButtonIndex: number;\n        public currentButton: any;\n        public change: () => ng.IPromise < any > ;\n        public onlyToggle: boolean;\n        public pipMedia: any;\n\n        constructor(\n            private $element: any,\n            private $attrs: angular.IAttributes,\n            private $scope: angular.IScope,\n            private $timeout: ng.ITimeoutService,\n            $injector: ng.auto.IInjectorService\n        ) {\n            \"ngInject\";\n\n            this.pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\n            this.class = $attrs['class'] || '';\n            const index = _.indexOf(this.buttons, _.find(this.buttons, {\n                id: this.currentButtonValue\n            }));\n            this.currentButtonIndex = index < 0 ? 0 : index;\n            this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\n        }\n\n        public $onChanges(changes: ToggleButtonsChanges) {\n            this.multiselect = changes.multiselect ? changes.multiselect.currentValue : false;\n            this.disabled = changes.ngDisabled ? changes.ngDisabled.currentValue : false;\n            this.onlyToggle = changes.onlyToggle ? changes.onlyToggle.currentValue : false;\n\n            this.buttons = !changes.buttons || _.isArray(changes.buttons.currentValue) && changes.buttons.currentValue.length === 0 ? [] : changes.buttons.currentValue;\n\n            const index = _.indexOf(this.buttons, _.find(this.buttons, {\n                id: this.currentButtonValue\n            }));\n            this.currentButtonIndex = index < 0 ? 0 : index;\n            this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\n        }\n\n        public $postLink() {\n            this.$element\n                .on('focusin', () => {\n                    this.$element.addClass('focused-container');\n                })\n                .on('focusout', () => {\n                    this.$element.removeClass('focused-container');\n                });\n        }\n\n        public buttonSelected(index) {\n            if (this.disabled) {\n                return;\n            }\n\n            this.currentButtonIndex = index;\n            this.currentButton = this.buttons[this.currentButtonIndex];\n            this.currentButtonValue = this.currentButton.id || index;\n\n            this.$timeout(() => {\n                if (this.change) {\n                    this.change();\n                }\n            });\n        }\n\n        public enterSpacePress(event) {\n            this.buttonSelected(event.index);\n        }\n\n        public highlightButton(index) {\n            if (this.multiselect &&\n                !_.isUndefined(this.currentButton.level) &&\n                !_.isUndefined(this.buttons[index].level)) {\n\n                return this.currentButton.level >= this.buttons[index].level;\n            }\n\n            return this.currentButtonIndex == index;\n        }\n    }\n\n    const ToggleButtons: ng.IComponentOptions = {\n        bindings: ToggleButtonsBindings,\n        templateUrl: 'toggle_buttons/toggle_buttons.html',\n        controller: ToggleButtonsController\n    }\n\n    angular\n        .module('pipToggleButtons', ['pipButtons.Templates'])\n        .component('pipToggleButtons', ToggleButtons);\n\n})();","(function(module) {\ntry {\n  module = angular.module('pipButtons.Templates');\n} catch (e) {\n  module = angular.module('pipButtons.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toggle_buttons/toggle_buttons.html',\n    '<div class=\"pip-toggle-buttons layout-row {{$ctrl.class}}\" pip-selected=\"$ctrl.bufButtonIndex\" pip-enter-space-press=\"$ctrl.enterSpacePress($event)\" ng-if=\"!$ctrl.pipMedia(\\'xs\\') || $ctrl.onlyToggle\"><md-button tabindex=\"-1\" ng-repeat=\"button in $ctrl.buttons\" ng-class=\"{\\'md-accent md-raised selected color-accent-bg\\' : $ctrl.highlightButton($index)}\" ng-attr-style=\"{{ \\'background-color:\\' + ($ctrl.highlightButton($index) ? button.backgroundColor : \\'\\') + \\'!important\\' }}\" class=\"pip-selectable pip-chip-button flex\" ng-click=\"$ctrl.buttonSelected($index, $event)\" ng-disabled=\"button.disabled || $ctrl.disabled\">{{button.name || button.title | translate}} <span ng-if=\"button.checked || button.complete || button.filled\" class=\"pip-tagged\">*</span></md-button></div><md-input-container class=\"md-block\" ng-if=\"$ctrl.pipMedia(\\'xs\\') && !$ctrl.onlyToggle\"><md-select ng-model=\"$ctrl.currentButtonIndex\" ng-disabled=\"$ctrl.disabled\" aria-label=\"DROPDOWN\" md-on-close=\"$ctrl.buttonSelected($ctrl.currentButtonIndex)\"><md-option ng-repeat=\"action in $ctrl.buttons\" value=\"{{ ::$index }}\">{{ (action.title || action.name) | translate }} <span ng-if=\"action.checked || action.complete || action.filled\" class=\"pip-tagged\">*</span></md-option></md-select></md-input-container>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-buttons-html.min.js.map\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYnV0dG9ucy50cyIsInNyYy9kZXBlbmRlbmNpZXMvdHJhbnNsYXRlLnRzIiwic3JjL2ZhYnMvZmFiX3Rvb2x0aXBfdmlzaWJpbGl0eS50cyIsInNyYy9yZWZyZXNoX2J1dHRvbi9yZWZyZXNoX2J1dHRvbi50cyIsInNyYy90b2dnbGVfYnV0dG9ucy90b2dnbGVfYnV0dG9ucy50cyIsInRlbXAvcGlwLXdlYnVpLWJ1dHRvbnMtaHRtbC5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNFQSxDQUFDO0lBQ0csWUFBWSxDQUFDO0lBRWIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUU7UUFDekIsa0JBQWtCO1FBQ2xCLGtCQUFrQjtRQUNsQix5QkFBeUI7S0FDNUIsQ0FBQyxDQUFDO0FBRVAsQ0FBQyxDQUFDLEVBQUUsQ0FBQzs7O0FDVEwsQ0FBQztJQUNHLFlBQVksQ0FBQztJQUViLDZCQUE2QixTQUFtQztRQUM1RCxJQUFNLFlBQVksR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBRTFGLE1BQU0sQ0FBQyxVQUFTLEdBQVc7WUFDdkIsTUFBTSxDQUFDLFlBQVksR0FBSSxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUN2RSxDQUFDLENBQUE7SUFDTCxDQUFDO0lBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRSxFQUFFLENBQUM7U0FDckMsTUFBTSxDQUFDLFdBQVcsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0FBRWxELENBQUMsQ0FBQyxFQUFFLENBQUM7OztBQ2RMLENBQUM7SUFDRyxZQUFZLENBQUM7SUFFYjtRQUtJLHdDQUNJLFFBQWEsRUFDYixNQUEyQixFQUMz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QyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRTVDLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEtBQUssQ0FBQztZQUNqRSxDQUFDO1lBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsSUFBSSxLQUFLLENBQUM7UUFDNUMsQ0FBQztRQUNMLDhCQUFDO0lBQUQsQ0F2RkEsQUF1RkMsSUFBQTtJQUVELElBQU0sYUFBYSxHQUF5QjtRQUN4QyxRQUFRLEVBQUUscUJBQXFCO1FBQy9CLFdBQVcsRUFBRSxvQ0FBb0M7UUFDakQsVUFBVSxFQUFFLHVCQUF1QjtLQUN0QyxDQUFBO0lBRUQsT0FBTztTQUNGLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLHNCQUFzQixDQUFDLENBQUM7U0FDcEQsU0FBUyxDQUFDLGtCQUFrQixFQUFFLGFBQWEsQ0FBQyxDQUFDO0FBRXRELENBQUMsQ0FBQyxFQUFFLENBQUM7OztBQ3BKTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIu+7vy8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cblxuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgncGlwQnV0dG9ucycsIFtcbiAgICAgICAgJ3BpcFRvZ2dsZUJ1dHRvbnMnLFxuICAgICAgICAncGlwUmVmcmVzaEJ1dHRvbicsXG4gICAgICAgICdwaXBGYWJUb29sdGlwVmlzaWJpbGl0eSdcbiAgICBdKTtcblxufSkoKTtcblxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvdHNkLmQudHNcIiAvPlxuXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIFRvZ2dsZUJ1dHRvbnNGaWx0ZXIoJGluamVjdG9yOiBuZy5hdXRvLklJbmplY3RvclNlcnZpY2UpIHtcbiAgICAgICAgY29uc3QgcGlwVHJhbnNsYXRlID0gJGluamVjdG9yLmhhcygncGlwVHJhbnNsYXRlJykgPyAkaW5qZWN0b3IuZ2V0KCdwaXBUcmFuc2xhdGUnKSA6IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGtleTogc3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gcGlwVHJhbnNsYXRlICA/IHBpcFRyYW5zbGF0ZVsndHJhbnNsYXRlJ10oa2V5KSB8fCBrZXkgOiBrZXk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgncGlwQnV0dG9ucy5UcmFuc2xhdGUnLCBbXSlcbiAgICAgICAgLmZpbHRlcigndHJhbnNsYXRlJywgVG9nZ2xlQnV0dG9uc0ZpbHRlcik7XG5cbn0pKCk7XG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgY2xhc3MgRmFiVG9vbHRpcFZpc2liaWxpdHlDb250cm9sbGVyIHtcbiAgICAgICAgcHJpdmF0ZSBfZWxlbWVudDtcbiAgICAgICAgcHJpdmF0ZSBfc2NvcGU6IGFuZ3VsYXIuSVNjb3BlO1xuICAgICAgICBwcml2YXRlIF90aW1lb3V0OiBuZy5JVGltZW91dFNlcnZpY2U7XG5cbiAgICAgICAgY29uc3RydWN0b3IoXG4gICAgICAgICAgICAkZWxlbWVudDogYW55LFxuICAgICAgICAgICAgJGF0dHJzOiBhbmd1bGFyLklBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgJHNjb3BlOiBhbmd1bGFyLklTY29wZSxcbiAgICAgICAgICAgICR0aW1lb3V0OiBuZy5JVGltZW91dFNlcnZpY2UsXG4gICAgICAgICAgICAkcGFyc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBcIm5nSW5qZWN0XCI7XG4gICAgICAgICAgICBsZXQgdHJpZ0dldHRlciA9ICRwYXJzZSgkYXR0cnNbJ3BpcEZhYlRvb2x0aXBWaXNpYmlsaXR5J10pLFxuICAgICAgICAgICAgICAgIHNob3dHZXR0ZXIgPSAkcGFyc2UoJGF0dHJzWydwaXBGYWJTaG93VG9vbHRpcCddKSxcbiAgICAgICAgICAgICAgICBzaG93U2V0dGVyID0gc2hvd0dldHRlci5hc3NpZ247XG5cbiAgICAgICAgICAgICRzY29wZS4kd2F0Y2godHJpZ0dldHRlciwgKGlzT3BlbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghXy5pc0Z1bmN0aW9uKHNob3dTZXR0ZXIpKSByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZXR0ZXIoJHNjb3BlLCBpc09wZW4pO1xuICAgICAgICAgICAgICAgICAgICB9LCA2MDApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dTZXR0ZXIoJHNjb3BlLCBpc09wZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICBmdW5jdGlvbiBwaXBGYWJUb29sdGlwVmlzaWJpbGl0eSgkcGFyc2UsICR0aW1lb3V0KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgc2NvcGU6IGZhbHNlLFxuICAgICAgICAgICAgY29udHJvbGxlcjogRmFiVG9vbHRpcFZpc2liaWxpdHlDb250cm9sbGVyXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwaXBGYWJUb29sdGlwVmlzaWJpbGl0eScsIFtdKVxuICAgICAgICAuZGlyZWN0aXZlKCdwaXBGYWJUb29sdGlwVmlzaWJpbGl0eScsIHBpcEZhYlRvb2x0aXBWaXNpYmlsaXR5KTtcblxufSkoKTsiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgaW50ZXJmYWNlIElSZWZyZXNoQnV0dG9uQmluZGluZ3Mge1xuICAgICAgICBba2V5OiBzdHJpbmddOiBhbnk7XG5cbiAgICAgICAgdGV4dDogYW55LFxuICAgICAgICAgICAgdmlzaWJsZTogYW55LFxuICAgICAgICAgICAgb25SZWZyZXNoOiBhbnlcbiAgICB9XG5cbiAgICBjb25zdCBSZWZyZXNoQnV0dG9uQmluZGluZ3M6IElSZWZyZXNoQnV0dG9uQmluZGluZ3MgPSB7XG4gICAgICAgIHRleHQ6ICc8cGlwVGV4dCcsXG4gICAgICAgIHZpc2libGU6ICc8cGlwVmlzaWJsZScsXG4gICAgICAgIG9uUmVmcmVzaDogJyY/cGlwUmVmcmVzaCdcbiAgICB9XG5cbiAgICBjbGFzcyBSZWZyZXNoQnV0dG9uQ2hhbmdlcyBpbXBsZW1lbnRzIG5nLklPbkNoYW5nZXNPYmplY3QsIElSZWZyZXNoQnV0dG9uQmluZGluZ3Mge1xuICAgICAgICBba2V5OiBzdHJpbmddOiBuZy5JQ2hhbmdlc09iamVjdCA8IGFueSA+IDtcbiAgICAgICAgLy8gTm90IG9uZSB3YXkgYmluZGluZ3NcbiAgICAgICAgb25SZWZyZXNoOiBuZy5JQ2hhbmdlc09iamVjdCA8ICh7XG4gICAgICAgICAgICAkZXZlbnQ6IGFueVxuICAgICAgICB9KSA9PiBuZy5JUHJvbWlzZSA8IGFueSA+PiA7XG4gICAgICAgIC8vIE9uZSB3YXkgYmluZGluZ3NcbiAgICAgICAgdGV4dDogbmcuSUNoYW5nZXNPYmplY3QgPCBzdHJpbmcgPiA7XG4gICAgICAgIHZpc2libGU6IG5nLklDaGFuZ2VzT2JqZWN0IDwgYm9vbGVhbiA+IDtcbiAgICB9XG5cbiAgICBjbGFzcyBSZWZyZXNoQnV0dG9uQ29udHJvbGxlciBpbXBsZW1lbnRzIElSZWZyZXNoQnV0dG9uQmluZGluZ3Mge1xuXG4gICAgICAgIHByaXZhdGUgX3RleHRFbGVtZW50OiBhbnk7XG4gICAgICAgIHByaXZhdGUgX2J1dHRvbkVsZW1lbnQ6IGFueTtcbiAgICAgICAgcHJpdmF0ZSBfd2lkdGg6IG51bWJlcjtcblxuICAgICAgICBwdWJsaWMgdGV4dDogc3RyaW5nO1xuICAgICAgICBwdWJsaWMgdmlzaWJsZTogYm9vbGVhbjtcbiAgICAgICAgcHVibGljIG9uUmVmcmVzaDogKHBhcmFtOiB7XG4gICAgICAgICAgICAkZXZlbnQ6IG5nLklBbmd1bGFyRXZlbnRcbiAgICAgICAgfSkgPT4gbmcuSVByb21pc2UgPCBhbnkgPiA7XG5cbiAgICAgICAgY29uc3RydWN0b3IoXG4gICAgICAgICAgICBwcml2YXRlICRzY29wZTogbmcuSVNjb3BlLFxuICAgICAgICAgICAgcHJpdmF0ZSAkZWxlbWVudDogYW55LFxuICAgICAgICAgICAgcHJpdmF0ZSAkYXR0cnM6IG5nLklBdHRyaWJ1dGVzXG4gICAgICAgICkge31cblxuICAgICAgICBwdWJsaWMgJHBvc3RMaW5rKCkge1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuJGVsZW1lbnQuY2hpbGRyZW4oJy5tZC1idXR0b24nKTtcbiAgICAgICAgICAgIHRoaXMuX3RleHRFbGVtZW50ID0gdGhpcy5fYnV0dG9uRWxlbWVudC5jaGlsZHJlbignLnBpcC1yZWZyZXNoLXRleHQnKTtcblxuICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgJG9uQ2hhbmdlcyhjaGFuZ2VzOiBSZWZyZXNoQnV0dG9uQ2hhbmdlcykge1xuICAgICAgICAgICAgaWYgKGNoYW5nZXMudmlzaWJsZS5jdXJyZW50VmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRleHQgPSBjaGFuZ2VzLnRleHQuY3VycmVudFZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBvbkNsaWNrKCRldmVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub25SZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblJlZnJlc2goe1xuICAgICAgICAgICAgICAgICAgICAkZXZlbnQ6ICRldmVudFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzaG93KCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3RleHRFbGVtZW50ID09PSB1bmRlZmluZWQgfHwgdGhpcy5fYnV0dG9uRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2V0IG5ldyB0ZXh0XG4gICAgICAgICAgICB0aGlzLl90ZXh0RWxlbWVudC50ZXh0KHRoaXMudGV4dCk7XG4gICAgICAgICAgICAvLyBTaG93IGJ1dHRvblxuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zaG93KCk7XG4gICAgICAgICAgICAvLyBBZGp1c3QgcG9zaXRpb25cbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy5fYnV0dG9uRWxlbWVudC53aWR0aCgpO1xuICAgICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jc3MoJ21hcmdpbi1sZWZ0JywgJy0nICsgd2lkdGggLyAyICsgJ3B4Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGhpZGUoKSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgY29uc3QgUmVmcmVzaEJ1dHRvbkNvbXBvbmVudDogbmcuSUNvbXBvbmVudE9wdGlvbnMgPSB7XG4gICAgICAgIGJpbmRpbmdzOiBSZWZyZXNoQnV0dG9uQmluZGluZ3MsXG4gICAgICAgIGNvbnRyb2xsZXI6IFJlZnJlc2hCdXR0b25Db250cm9sbGVyLFxuICAgICAgICB0ZW1wbGF0ZTogJzxtZC1idXR0b24gY2xhc3M9XCJwaXAtcmVmcmVzaC1idXR0b25cIiB0YWJpbmRleD1cIi0xXCIgbmctY2xpY2s9XCIkY3RybC5vbkNsaWNrKCRldmVudClcIiBhcmlhLWxhYmVsPVwiUkVGUkVTSFwiPicgK1xuICAgICAgICAgICAgJzxtZC1pY29uIG1kLXN2Zy1pY29uPVwiaWNvbnM6cmVmcmVzaFwiPjwvbWQtaWNvbj4nICtcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInBpcC1yZWZyZXNoLXRleHRcIj48L3NwYW4+JyArXG4gICAgICAgICAgICAnPC9tZC1idXR0b24+J1xuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgncGlwUmVmcmVzaEJ1dHRvbicsIFsnbmdNYXRlcmlhbCddKVxuICAgICAgICAuY29tcG9uZW50KCdwaXBSZWZyZXNoQnV0dG9uJywgUmVmcmVzaEJ1dHRvbkNvbXBvbmVudCk7XG5cbn0pKCk7IiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvdHNkLmQudHNcIiAvPlxuXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGNsYXNzIFRvZ2dsZUJ1dHRvbiB7XG4gICAgICAgIGlkOiBhbnk7XG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgZGlzYWJsZWQ6IGJvb2xlYW47XG4gICAgICAgIGxldmVsOiBudW1iZXI7XG4gICAgICAgIGRpc2VsZWN0YWJsZTogYm9vbGVhbjtcbiAgICAgICAgZmlsbGVkOiBib29sZWFuO1xuICAgIH1cblxuICAgIGludGVyZmFjZSBJVG9nZ2xlQnV0dG9uc0JpbmRpbmdzIHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55O1xuXG4gICAgICAgIG5nRGlzYWJsZWQ6IGFueTtcbiAgICAgICAgYnV0dG9uczogYW55O1xuICAgICAgICBjdXJyZW50QnV0dG9uVmFsdWU6IGFueTtcbiAgICAgICAgY3VycmVudEJ1dHRvbjogYW55O1xuICAgICAgICBtdWx0aXNlbGVjdDogYW55O1xuICAgICAgICBjaGFuZ2U6IGFueTtcbiAgICAgICAgb25seVRvZ2dsZTogYW55XG4gICAgfVxuXG4gICAgY29uc3QgVG9nZ2xlQnV0dG9uc0JpbmRpbmdzOiBJVG9nZ2xlQnV0dG9uc0JpbmRpbmdzID0ge1xuICAgICAgICBuZ0Rpc2FibGVkOiAnPD8nLFxuICAgICAgICBidXR0b25zOiAnPHBpcEJ1dHRvbnMnLFxuICAgICAgICBjdXJyZW50QnV0dG9uVmFsdWU6ICc9bmdNb2RlbCcsXG4gICAgICAgIGN1cnJlbnRCdXR0b246ICc9P3BpcEJ1dHRvbk9iamVjdCcsXG4gICAgICAgIG11bHRpc2VsZWN0OiAnPD9waXBNdWx0aXNlbGVjdCcsXG4gICAgICAgIGNoYW5nZTogJyZuZ0NoYW5nZScsXG4gICAgICAgIG9ubHlUb2dnbGU6ICc8P3BpcE9ubHlUb2dnbGUnXG4gICAgfVxuXG4gICAgY2xhc3MgVG9nZ2xlQnV0dG9uc0NoYW5nZXMgaW1wbGVtZW50cyBuZy5JT25DaGFuZ2VzT2JqZWN0LCBJVG9nZ2xlQnV0dG9uc0JpbmRpbmdzIHtcbiAgICAgICAgW2tleTogc3RyaW5nXTogbmcuSUNoYW5nZXNPYmplY3QgPCBhbnkgPiA7XG4gICAgICAgIC8vIE5vdCBvbmUgd2F5IGJpbmRpbmdzXG4gICAgICAgIGN1cnJlbnRCdXR0b25WYWx1ZTogYW55O1xuICAgICAgICBjdXJyZW50QnV0dG9uOiBhbnk7XG4gICAgICAgIGNoYW5nZTogbmcuSUNoYW5nZXNPYmplY3QgPCAoKSA9PiBuZy5JUHJvbWlzZSA8IHZvaWQgPj4gO1xuICAgICAgICAvLyBPbmUgd2F5IGJpbmRpbmdzXG4gICAgICAgIG5nRGlzYWJsZWQ6IG5nLklDaGFuZ2VzT2JqZWN0IDwgYm9vbGVhbiA+IDtcbiAgICAgICAgYnV0dG9uczogbmcuSUNoYW5nZXNPYmplY3QgPCBUb2dnbGVCdXR0b25bXSA+IDtcbiAgICAgICAgbXVsdGlzZWxlY3Q6IG5nLklDaGFuZ2VzT2JqZWN0IDwgYm9vbGVhbiA+IDtcbiAgICAgICAgb25seVRvZ2dsZTogbmcuSUNoYW5nZXNPYmplY3QgPCBib29sZWFuID4gO1xuICAgIH1cblxuICAgIGNsYXNzIFRvZ2dsZUJ1dHRvbnNDb250cm9sbGVyIGltcGxlbWVudHMgSVRvZ2dsZUJ1dHRvbnNCaW5kaW5ncyB7XG4gICAgICAgIGxlbmdodDogbnVtYmVyO1xuXG4gICAgICAgIHB1YmxpYyBuZ0Rpc2FibGVkOiBib29sZWFuO1xuICAgICAgICBwdWJsaWMgY2xhc3M6IHN0cmluZztcbiAgICAgICAgcHVibGljIG11bHRpc2VsZWN0OiBib29sZWFuO1xuICAgICAgICBwdWJsaWMgYnV0dG9uczogVG9nZ2xlQnV0dG9uW107XG4gICAgICAgIHB1YmxpYyBkaXNhYmxlZDogYm9vbGVhbjtcbiAgICAgICAgcHVibGljIGN1cnJlbnRCdXR0b25WYWx1ZTogYW55O1xuICAgICAgICBwdWJsaWMgY3VycmVudEJ1dHRvbkluZGV4OiBudW1iZXI7XG4gICAgICAgIHB1YmxpYyBjdXJyZW50QnV0dG9uOiBhbnk7XG4gICAgICAgIHB1YmxpYyBjaGFuZ2U6ICgpID0+IG5nLklQcm9taXNlIDwgYW55ID4gO1xuICAgICAgICBwdWJsaWMgb25seVRvZ2dsZTogYm9vbGVhbjtcbiAgICAgICAgcHVibGljIHBpcE1lZGlhOiBhbnk7XG5cbiAgICAgICAgY29uc3RydWN0b3IoXG4gICAgICAgICAgICBwcml2YXRlICRlbGVtZW50OiBhbnksXG4gICAgICAgICAgICBwcml2YXRlICRhdHRyczogYW5ndWxhci5JQXR0cmlidXRlcyxcbiAgICAgICAgICAgIHByaXZhdGUgJHNjb3BlOiBhbmd1bGFyLklTY29wZSxcbiAgICAgICAgICAgIHByaXZhdGUgJHRpbWVvdXQ6IG5nLklUaW1lb3V0U2VydmljZSxcbiAgICAgICAgICAgICRpbmplY3RvcjogbmcuYXV0by5JSW5qZWN0b3JTZXJ2aWNlXG4gICAgICAgICkge1xuICAgICAgICAgICAgXCJuZ0luamVjdFwiO1xuXG4gICAgICAgICAgICB0aGlzLnBpcE1lZGlhID0gJGluamVjdG9yLmhhcygncGlwTWVkaWEnKSA/ICRpbmplY3Rvci5nZXQoJ3BpcE1lZGlhJykgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy5jbGFzcyA9ICRhdHRyc1snY2xhc3MnXSB8fCAnJztcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gXy5pbmRleE9mKHRoaXMuYnV0dG9ucywgXy5maW5kKHRoaXMuYnV0dG9ucywge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmN1cnJlbnRCdXR0b25WYWx1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50QnV0dG9uSW5kZXggPSBpbmRleCA8IDAgPyAwIDogaW5kZXg7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCdXR0b24gPSB0aGlzLmJ1dHRvbnMubGVuZ3RoID4gMCA/IHRoaXMuYnV0dG9uc1t0aGlzLmN1cnJlbnRCdXR0b25JbmRleF0gOiB0aGlzLmN1cnJlbnRCdXR0b247XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgJG9uQ2hhbmdlcyhjaGFuZ2VzOiBUb2dnbGVCdXR0b25zQ2hhbmdlcykge1xuICAgICAgICAgICAgdGhpcy5tdWx0aXNlbGVjdCA9IGNoYW5nZXMubXVsdGlzZWxlY3QgPyBjaGFuZ2VzLm11bHRpc2VsZWN0LmN1cnJlbnRWYWx1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGNoYW5nZXMubmdEaXNhYmxlZCA/IGNoYW5nZXMubmdEaXNhYmxlZC5jdXJyZW50VmFsdWUgOiBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMub25seVRvZ2dsZSA9IGNoYW5nZXMub25seVRvZ2dsZSA/IGNoYW5nZXMub25seVRvZ2dsZS5jdXJyZW50VmFsdWUgOiBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5idXR0b25zID0gIWNoYW5nZXMuYnV0dG9ucyB8fCBfLmlzQXJyYXkoY2hhbmdlcy5idXR0b25zLmN1cnJlbnRWYWx1ZSkgJiYgY2hhbmdlcy5idXR0b25zLmN1cnJlbnRWYWx1ZS5sZW5ndGggPT09IDAgPyBbXSA6IGNoYW5nZXMuYnV0dG9ucy5jdXJyZW50VmFsdWU7XG5cbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gXy5pbmRleE9mKHRoaXMuYnV0dG9ucywgXy5maW5kKHRoaXMuYnV0dG9ucywge1xuICAgICAgICAgICAgICAgIGlkOiB0aGlzLmN1cnJlbnRCdXR0b25WYWx1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50QnV0dG9uSW5kZXggPSBpbmRleCA8IDAgPyAwIDogaW5kZXg7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCdXR0b24gPSB0aGlzLmJ1dHRvbnMubGVuZ3RoID4gMCA/IHRoaXMuYnV0dG9uc1t0aGlzLmN1cnJlbnRCdXR0b25JbmRleF0gOiB0aGlzLmN1cnJlbnRCdXR0b247XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgJHBvc3RMaW5rKCkge1xuICAgICAgICAgICAgdGhpcy4kZWxlbWVudFxuICAgICAgICAgICAgICAgIC5vbignZm9jdXNpbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5hZGRDbGFzcygnZm9jdXNlZC1jb250YWluZXInKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbignZm9jdXNvdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2ZvY3VzZWQtY29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgYnV0dG9uU2VsZWN0ZWQoaW5kZXgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRCdXR0b25JbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50QnV0dG9uID0gdGhpcy5idXR0b25zW3RoaXMuY3VycmVudEJ1dHRvbkluZGV4XTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJ1dHRvblZhbHVlID0gdGhpcy5jdXJyZW50QnV0dG9uLmlkIHx8IGluZGV4O1xuXG4gICAgICAgICAgICB0aGlzLiR0aW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBlbnRlclNwYWNlUHJlc3MoZXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uU2VsZWN0ZWQoZXZlbnQuaW5kZXgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGhpZ2hsaWdodEJ1dHRvbihpbmRleCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubXVsdGlzZWxlY3QgJiZcbiAgICAgICAgICAgICAgICAhXy5pc1VuZGVmaW5lZCh0aGlzLmN1cnJlbnRCdXR0b24ubGV2ZWwpICYmXG4gICAgICAgICAgICAgICAgIV8uaXNVbmRlZmluZWQodGhpcy5idXR0b25zW2luZGV4XS5sZXZlbCkpIHtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRCdXR0b24ubGV2ZWwgPj0gdGhpcy5idXR0b25zW2luZGV4XS5sZXZlbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEJ1dHRvbkluZGV4ID09IGluZGV4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgVG9nZ2xlQnV0dG9uczogbmcuSUNvbXBvbmVudE9wdGlvbnMgPSB7XG4gICAgICAgIGJpbmRpbmdzOiBUb2dnbGVCdXR0b25zQmluZGluZ3MsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndG9nZ2xlX2J1dHRvbnMvdG9nZ2xlX2J1dHRvbnMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6IFRvZ2dsZUJ1dHRvbnNDb250cm9sbGVyXG4gICAgfVxuXG4gICAgYW5ndWxhclxuICAgICAgICAubW9kdWxlKCdwaXBUb2dnbGVCdXR0b25zJywgWydwaXBCdXR0b25zLlRlbXBsYXRlcyddKVxuICAgICAgICAuY29tcG9uZW50KCdwaXBUb2dnbGVCdXR0b25zJywgVG9nZ2xlQnV0dG9ucyk7XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3BpcEJ1dHRvbnMuVGVtcGxhdGVzJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdwaXBCdXR0b25zLlRlbXBsYXRlcycsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgndG9nZ2xlX2J1dHRvbnMvdG9nZ2xlX2J1dHRvbnMuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJwaXAtdG9nZ2xlLWJ1dHRvbnMgbGF5b3V0LXJvdyB7eyRjdHJsLmNsYXNzfX1cIiBwaXAtc2VsZWN0ZWQ9XCIkY3RybC5idWZCdXR0b25JbmRleFwiIHBpcC1lbnRlci1zcGFjZS1wcmVzcz1cIiRjdHJsLmVudGVyU3BhY2VQcmVzcygkZXZlbnQpXCIgbmctaWY9XCIhJGN0cmwucGlwTWVkaWEoXFwneHNcXCcpIHx8ICRjdHJsLm9ubHlUb2dnbGVcIj48bWQtYnV0dG9uIHRhYmluZGV4PVwiLTFcIiBuZy1yZXBlYXQ9XCJidXR0b24gaW4gJGN0cmwuYnV0dG9uc1wiIG5nLWNsYXNzPVwie1xcJ21kLWFjY2VudCBtZC1yYWlzZWQgc2VsZWN0ZWQgY29sb3ItYWNjZW50LWJnXFwnIDogJGN0cmwuaGlnaGxpZ2h0QnV0dG9uKCRpbmRleCl9XCIgbmctYXR0ci1zdHlsZT1cInt7IFxcJ2JhY2tncm91bmQtY29sb3I6XFwnICsgKCRjdHJsLmhpZ2hsaWdodEJ1dHRvbigkaW5kZXgpID8gYnV0dG9uLmJhY2tncm91bmRDb2xvciA6IFxcJ1xcJykgKyBcXCchaW1wb3J0YW50XFwnIH19XCIgY2xhc3M9XCJwaXAtc2VsZWN0YWJsZSBwaXAtY2hpcC1idXR0b24gZmxleFwiIG5nLWNsaWNrPVwiJGN0cmwuYnV0dG9uU2VsZWN0ZWQoJGluZGV4LCAkZXZlbnQpXCIgbmctZGlzYWJsZWQ9XCJidXR0b24uZGlzYWJsZWQgfHwgJGN0cmwuZGlzYWJsZWRcIj57e2J1dHRvbi5uYW1lIHx8IGJ1dHRvbi50aXRsZSB8IHRyYW5zbGF0ZX19IDxzcGFuIG5nLWlmPVwiYnV0dG9uLmNoZWNrZWQgfHwgYnV0dG9uLmNvbXBsZXRlIHx8IGJ1dHRvbi5maWxsZWRcIiBjbGFzcz1cInBpcC10YWdnZWRcIj4qPC9zcGFuPjwvbWQtYnV0dG9uPjwvZGl2PjxtZC1pbnB1dC1jb250YWluZXIgY2xhc3M9XCJtZC1ibG9ja1wiIG5nLWlmPVwiJGN0cmwucGlwTWVkaWEoXFwneHNcXCcpICYmICEkY3RybC5vbmx5VG9nZ2xlXCI+PG1kLXNlbGVjdCBuZy1tb2RlbD1cIiRjdHJsLmN1cnJlbnRCdXR0b25JbmRleFwiIG5nLWRpc2FibGVkPVwiJGN0cmwuZGlzYWJsZWRcIiBhcmlhLWxhYmVsPVwiRFJPUERPV05cIiBtZC1vbi1jbG9zZT1cIiRjdHJsLmJ1dHRvblNlbGVjdGVkKCRjdHJsLmN1cnJlbnRCdXR0b25JbmRleClcIj48bWQtb3B0aW9uIG5nLXJlcGVhdD1cImFjdGlvbiBpbiAkY3RybC5idXR0b25zXCIgdmFsdWU9XCJ7eyA6OiRpbmRleCB9fVwiPnt7IChhY3Rpb24udGl0bGUgfHwgYWN0aW9uLm5hbWUpIHwgdHJhbnNsYXRlIH19IDxzcGFuIG5nLWlmPVwiYWN0aW9uLmNoZWNrZWQgfHwgYWN0aW9uLmNvbXBsZXRlIHx8IGFjdGlvbi5maWxsZWRcIiBjbGFzcz1cInBpcC10YWdnZWRcIj4qPC9zcGFuPjwvbWQtb3B0aW9uPjwvbWQtc2VsZWN0PjwvbWQtaW5wdXQtY29udGFpbmVyPicpO1xufV0pO1xufSkoKTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwLXdlYnVpLWJ1dHRvbnMtaHRtbC5taW4uanMubWFwXG4iXX0="}